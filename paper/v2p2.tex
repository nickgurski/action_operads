\section{\texorpdfstring{$\Lambda$}{L}-Operads and their Algebras}\label{sec:forward-op}

This section presents the definition of a $\Lambda$-operad (\cref{Defi:lamop}), where $\Lambda$ is an action operad.
This definition unifies the various types (non-symmetric, symmetric, and braided) of operads discussed in \cref{sec:back-op} under one umbrella term.
The different group actions arise from different choices of $\Lambda$.
We also define algebras over a $\Lambda$-operad in \cref{Defi:aop-alg}, and prove a change-of-action operad result in \cref{thm:pbaop}.

%Just as we had the definitions of operad, symmetric operad, and braided operad, we now come to the general definition of a $\Lambda$-operad,  Thereafter we begin to delve into the theory around $\Lambda$-operads. Beginning by recasting familiar operads as $\Lambda$-operads for particular choices of $\Lambda$, we then proceed to shadow standard operadic definitions for algebras and pseudoalgebras in this setting, characterising algebras using endomorphism $\Lambda$-operads, and deriving monads from $\Lambda$-operads. We show that there is an adjunction between $\Lambda\mbox{-}\mb{Op}$ and $\Sigma\mbox{-}\mb{Op}$, and prove some technical results regarding maps between monads induced by $\Lambda$-operads.
 	% QQQ chapter: operads and algebras with general group actions
 	% \begin{itemize}
 	% 	\item defines $\Lambda$-operads
 	% 	\item goes over familiar examples
 	% 	\item recasts familar operad algebra stuff for $\Lambda$-operads
 	% 	\begin{itemize}
	%  		\item defines algebras and pseudoalgebras for $\Lambda$-operads
	%  		\item characterises algebras using the endomorphism operads
	%  		\item monads via operads
	%  	\end{itemize}
	%  	\item theorem about the adjunction between $\Lambda-\bf{Op}$ and $\bf{\Sigma}-\bf{Op}$
	%  	\item technical results about monad maps
 	% \end{itemize}


\begin{Defi}[($\Lambda$-operads)]\label{Defi:lamop}
  Let $\Lambda$ be an action operad. A \textit{$\Lambda$-operad} $P$ (in $\mb{Sets}$) consists of
    \begin{itemize}
      \item a non-symmetric operad $P$ in $\mb{Sets}$ and
      \item for each $n$, an action $P(n) \times \Lambda(n) \rightarrow P(n)$ of $\Lambda(n)$ on $P(n)$
    \end{itemize}
such that the following two equivariance axioms hold.
  \begin{itemize}
    \item For each $p \in P(n)$, $q_i \in P(k_i)$, and $g_i \in \Lambda(k_i)$ for $i=1, \ldots, n$:
  \[
    \mu^{P}(p; q_{1} \cdot g_{1}, \ldots, q_{n} \cdot g_{n}) = \mu^{P}(p; q_{1}, \ldots, y_{n}) \cdot \beta^{\Lambda}(g_{1}, \ldots, g_{n}).
  \]
    \item For each $p \in P(n)$, $g \in \Lambda(n)$, and $q_i \in \Lambda(k_i)$ for $i=1, \ldots, n$:
  \[
    \mu^{P}(p \cdot g; q_{1}, \ldots, q_{n}) = \mu^{P}\left(p; q_{g^{-1}(1)}, \ldots, q_{g^{-1}(n)}\right) \cdot \delta_{n;k_1,\ldots,k_n}^{\Lambda}(g).
  \]
  \end{itemize}
\end{Defi}

\begin{rem}\label{rem:single-axiom}
Using \cref{eqn:mu-from-betadelta} from the proof of \cref{thm:charAOp}, the two equivariance axioms in \cref{Defi:lamop} can be combined into the single equality
\[
    \mu\left(p; p_1, \ldots p_n\right)  \mu\left(\tau;\tau_1, \ldots, \tau_n\right) = \mu\left(p \cdot \tau; p_{\tau(1)}\cdot \tau_{1}, \ldots,  p_{\tau(n)}\cdot \tau_{n}\right).
\]
\end{rem}

\begin{rem}\label{oscg}
The operadic crossed simplicial groups of Semidetnov appear to correspond to action operads with trivial $\Lambda_0$, although they are defined using $\circ_i$ operations instead of an operadic composition $\mu$. Continuing the comparison, his $G_\ast$-shifted operads \cite[Definition 3.5]{semidetnov} satisfy two axioms that are the same as those for $\Lambda$-operads in \Cref{Defi:lamop}. %While the operads of Semidetnov are defined using circle-$i$ notation, the correspondence seems quite clear.\acnote{reword more better}
\end{rem}


\begin{Defi}[(Map of $\Lambda$-operads)]\label{Defi:aop_map}
Let $P$ and $Q$ be $\Lambda$-operads. A \emph{map $f \colon P \rightarrow Q$ of $\Lambda$-operads} consists of an operad map (\cref{rem:cat-of-nonsym-op}) that is levelwise equivariant with respect to the $\Lambda(n)$-actions, i.e., for each $n \in \mathbb{N}$ the following diagram commutes.
  \[
    \xy
      (0,0)*+{P(n) \times \Lambda(n)}="00";
      (30,0)*+{Q(n) \times \Lambda(n)}="10";
      (30,-15)*+{Q(n)}="11";
      (0,-15)*+{P(n)}="01";
      %
      {\ar^{f_n \times 1} "00";"10"};
      {\ar "10";"11"};
      {\ar "00";"01"};
      {\ar_{f_n} "01";"11"};
    \endxy
  \]
\end{Defi}

\begin{prop}\label{prop:cat-of-L-op}
There is a category with 
\begin{itemize}
\item objects the $\Lambda$-operads $P$ in $\mb{Sets}$, 
\item morphisms the maps of $\Lambda$-operads between them,
\item identities $1_P \colon P \to P$ given by
\[
(1_P)_n = 1_{P(n)} \colon P(n) \to P(n),
\]
and
\item composition given by
\[
(g \circ f)_n = g_n \circ f_n.
\]
\end{itemize}
\end{prop}

\begin{nota}[(The category of $\Lambda$-operads)]\label{nota:cat-of-L-op}
The category in \cref{prop:cat-of-sym-op} is called the \emph{category of $\Lambda$-operads (in $\mb{Sets}$)}, and is denoted $\Lambda\mbox{-}\mb{Op}$.
\end{nota}


\begin{example}[(Non-symmetric, symmetric, and braided operads expressed as $\Lambda$-operads)]\label{ex:lop-exs}
We can express the non-symmetric, symmetric, and braided operads of \cref{sec:back-op} as the $\Lambda$-operads for the appropriate choice of $\Lambda$.
  \begin{enumerate}
    \item Let $T$ denote the terminal operad in $\mb{Sets}$ equipped with its unique action operad structure. Then a $T$-operad is just a non-symmetric operad in $\mb{Sets}$.
    \item Let $\Sigma$ denote the operad of symmetric groups with $\pi \colon \Sigma \rightarrow \Sigma$ the identity map. Then a $\Sigma$-operad is a symmetric operad in the category of sets.
    \item Let $B$ denote the operad of braid groups with $\pi_{n} \colon B_{n} \rightarrow \Sigma_{n}$ the canonical projection of a braid onto its underlying permutation. Then a $B$-operad is a braided operad in the sense of Fiedorowicz \cite{fie-br}.
  \end{enumerate}
\end{example}

A further example of a $\Lambda$-operad is given by the underlying operad, $\Lambda$, of $\Lambda$ itself.
\begin{prop}\label{prop:gisgop}
Let $\Lambda$ be an action operad. Then the operad $\Lambda$ is itself a $\Lambda$-operad.
\end{prop}
\begin{proof}
The underlying operad $\Lambda$ is of course an operad in $\mb{Sets}$. The right group action $\Lambda(n) \times \Lambda(n) \rightarrow \Lambda(n)$ is given simply by the group multiplication in $\Lambda(n)$. The two equivariance axioms are then both instances of the action operad axiom of $\Lambda$.
\end{proof}

An operad is intended to be an abstract description of a certain type of algebraic structure, and the particular instances of that structure are the algebras for that operad. 
We give the general definition first in \cref{Defi:aop-alg}, and then recover algebras over non-symmetric, symmetric, and braided operads in \cref{ex:lop-alg-exs}.

\begin{rem}\label{rem:aop-alg-pre}
In preparation for the definition of an algebra over a $\Lambda$-operad, we make the following two remarks.
\begin{enumerate}
\item If $\Lambda$ is an action operad and $X$ is a set, then $\Lambda(n)$ acts on $X^n$ by 
\[
\Lambda(n) \times X^n \stackrel{\pi_n \times 1}{\to} \Sigma_n \times X^n \stackrel{\kappa_n}{\to} X^n,
\]
where $\kappa_n$ is defined by the formula
\[
\kappa_n(\sigma; x_1, \ldots, x_n) = (x_{\sigma^{-1}(1)}, \ldots, x_{\sigma^{-1}(n)}).
\]
Thus we would write
\[
g \cdot (x_1, \ldots, x_n) = (x_{g^{-1}(1)}, \ldots, x_{g^{-1}(n)})
\]
using \cref{nota:perm_shorthand}.
\item Following the previous item, we define $\coeq{P}{X}{\Lambda}{n}$ as in \cref{conv:coeq}. An algebra over $P$ will involve maps with source object $\coeq{P}{X}{\Lambda}{n}$, so we remind the reader of the tilde notation for maps respecting coequalizers, \cref{conv:equiv-maps}.
\end{enumerate}
\end{rem}

\begin{Defi}[($P$-algebras)]\label{Defi:aop-alg}
Let $\Lambda$ be an action operad, and $P$ be a $\Lambda$-operad. An \textit{algebra} for $P$, or \emph{$P$-algebra}, consists of a set $X$ together with maps 
\[
\alpha_{n} \colon \coeq{P}{X}{\Lambda}{n} \rightarrow X
\]
such that the maps $\tilde{\alpha}_{n}$ satisfy the following axioms.
\begin{enumerate}
\item The element $\id \in P(1)$ is a unit in the sense that
  \[
    \tilde{\alpha}_{1}(\id; x) = x
  \]
for all $x \in X$.
\item The maps $\tilde{\alpha}_{n}$ are associative in the sense that the following diagram commutes.
  %%Expanded diagram
  % \[
  %   \xy
  %     (0,0)*+{O(n) \times O(k_{1}) \times X^{k_{1}} \times \cdots \times O(k_{n}) \times X^{k_{n}}}="ul";
  %     (75,0)*+{O(n) \times X^{n}}="ur";
  %     (0,-12)*+{O(n) \times O(k_{1}) \times \cdots \times O(k_{n}) \times X^{k_{1}} \times \cdots \times X^{k_{n}}}="ml";
  %     (0,-24)*+{O(\sum k_{i}) \times X^{\sum k_{i}}}="bl";
  %     (75,-24)*+{X}="br";
  %     {\ar^>>>>>>>>>>>>>>{1 \times \alpha_{k_{1}} \times \cdots \alpha_{k_{n}}} "ul"; "ur"};
  %     {\ar^{\alpha_{n}} "ur"; "br"};
  %     {\ar_{\cong} "ul"; "ml"};
  %     {\ar_{\mu \times 1} "ml"; "bl"};
  %     {\ar_{\alpha_{\sum k_{i}}} "bl"; "br"};
  %   \endxy
  % \]
  \[
    \xy
      (0,0)*+{P(n) \times \prod_{i=1}^n \left(P(k_i) \times X^{k_i}\right)}="ul";
      (60,0)*+{P(n) \times X^{n}}="ur";
      (0,-12)*+{P(n) \times \left(\prod_{i=1}^n P(k_i)\right) \times \prod_{i=1}^n \left(X^{k_i}\right) }="ml";
      (0,-24)*+{P(\sum k_{i}) \times X^{\sum k_{i}}}="bl";
      (60,-24)*+{X}="br";
      {\ar^>>>>>>>>>>>>>>{1 \times \tilde{\alpha}_{k_{1}} \times \cdots \times \tilde{\alpha}_{k_{n}}} "ul"; "ur"};
      {\ar^{\tilde{\alpha}_{n}} "ur"; "br"};
      {\ar_{\cong} "ul"; "ml"};
      {\ar_{\mu \times 1} "ml"; "bl"};
      {\ar_{\tilde{\alpha}_{\sum k_{i}}} "bl"; "br"};
    \endxy
  \]
\end{enumerate}
\end{Defi}

%\begin{Defi}\label{opalgax}
%Let $O$ be a non-symmetric operad. An \textit{algebra} for $O$ consists of a set $X$ together with maps $\alpha_{n} \colon O(n) \times X^{n} \rightarrow X$ such that the following axioms hold.
%
%\end{Defi}
%
%$\coeq{P}{X}{\Lambda}{n}$
%
%Moving on to algebras for a $\Lambda$-operad, let $P$ be a $\Lambda$-operad and let $X$ be any set. Write $\coeq{P}{X}{\Lambda}{n}$ for the coequalizer of the pair of maps
%  \[
%    P(n) \times \Lambda(n) \times X^{n} \rightrightarrows P(n) \times X^{n}
%  \]
%of which the first map is the action of $\Lambda(n)$ on $P(n)$ and the second map is
%  \[
%    P(n) \times \Lambda(n) \times X^{n} \rightarrow P(n) \times \Sigma_{n} \times X^{n} \rightarrow P(n) \times X^{n}
%  \]
%using $\pi_{n} \colon \Lambda(n) \rightarrow \Sigma_{n}$ together with the canonical action of $\Sigma_{n}$ on $X^{n}$ by permutation of coordinates: $\sigma \cdot (x_{1}, \ldots, x_{n}) = (x_{\sigma^{-1}(1)}, \ldots, x_{\sigma^{-1}(n)})$. By the universal property of the coequalizer, a function $f \colon \coeq{P}{X}{\Lambda}{n} \rightarrow Y$ can be identified with a function $\tilde{f} \colon P(n) \times X^{n} \rightarrow Y$ such that
%  \[
%    \tilde{f}(p\cdot g; x_{1}, \ldots, x_{n}) = \tilde{f}\left(p; x_{g^{-1}(1)}, \ldots, x_{g^{-1}(n)}\right).
%  \]

\begin{rem}
It is worth reiterating that the equivariance required for a $P$-algebra is built into the definition above by requiring that the maps $\alpha_{n}$ be defined on coequalizers, even though the algebra axioms then only use the maps $\tilde{\alpha}_{n}$. Since every $\Lambda$-operad has an underlying non-symmetric operad (see \cref{thm:pbaop}, applied to the unique map $T \rightarrow \Lambda$), this reflects the fact that the algebras for the $\Lambda$-equivariant version are always algebras for the plain version, but not conversely.
\end{rem}

\begin{example}[(Algebras over non-symmetric, symmetric, and braided operads as $\Lambda$-operads)]\label{ex:lop-alg-exs}
We can recover standard notions of algebras over non-symmetric, symmetric, and braided operads as algebras over a $\Lambda$-operad.
  \begin{enumerate}
    \item For the action operad $T$ of trivial groups, a $T$-operad is a non-symmetric operad. The coequalizer $\coeq{P}{X}{T}{n}$ is isomorphic to $P(n) \times X^n$, so without loss of generality we can assume that $\tilde{\alpha}_n=\alpha_n$. This recovers the usual notion of an algebra over a non-symmetric operad, see \cite[Definition 1.20]{mss-op}.
    \item For the action operad $\Sigma$ of symmetric groups, a $\Sigma$-operad is a symmetric operad. \cref{Defi:aop-alg} is equivalent to May's original definition \cite[Definition 1.1]{maygeom} by \cref{rem:aop-alg-pre}.
    \item For the action operad $B$ of braid groups, a $B$-operad is a braided operad in the sense of Fiedorowicz \cite{fie-br}. Once again, \cref{Defi:aop-alg} is equivalent to Fiedorowicz's definition \cite[Definition 3.2]{fie-br} by \cref{rem:aop-alg-pre}.
  \end{enumerate}
\end{example}


\begin{Defi}[(Map of $P$-algebras)]\label{Defi:map-palg}
Let $P$ be a $\Lambda$-operad, and let $(X, \alpha)$ and $(Y, \beta)$ be $P$-algebras. Then a \emph{map of $P$-algebras} $f \colon  (X, \alpha) \rightarrow (Y, \beta)$ is a function $f \colon X \rightarrow Y$ such that the following diagram commutes for every $n$.
  \[
    \xy
      {\ar^{1 \times f^{n}} (0,0)*+{P(n) \times X^{n}}; (50,0)*+{P(n) \times Y^{n}} };
      {\ar^{\tilde{\beta}_{n}} (50,0)*+{P(n) \times Y^{n}}; (50,-15)*+{Y} };
      {\ar_{\tilde{\alpha}_{n}} (0,0)*+{P(n) \times X^{n}}; (0,-15)*+{X} };
      {\ar_{f} (0,-15)*+{X}; (50,-15)*+{Y} };
    \endxy
  \]
\end{Defi}

\begin{prop}\label{prop:cat-of-Palg}
Let $\Lambda$ be an action operad and $P$ be a $\Lambda$-operad.
There is a category with 
\begin{itemize}
\item objects the $P$-algebras $(X, \alpha)$, 
\item morphisms the maps of $P$-algebras between them,
\item identities $1_{(X, \alpha)} \colon (X, \alpha) \to (X, \alpha)$ given by the identities $1_X$, and
\item composition given by composition of the underlying functions.
\end{itemize}
\end{prop}

\begin{nota}[(The category of $P$-algebras)]\label{nota:cat-of-palg}
The category in \cref{prop:cat-of-Palg} is called the \emph{category of $P$-algebras (in $\mb{Sets}$)}, and is denoted $P\mbox{-}\mb{Alg}$.
\end{nota}

The final goal of this section is to explore the adjunctions induced by a map of action operads. 
Using these, we will recast the category of algebras over a $\Lambda$-operad $P$ using the endomorphism operad of \cref{ex:endo}.
We begin by proving a change-of-action operad result.

\begin{thm}\label{thm:pbaop}
Let $f \colon \Lambda \rightarrow \Lambda'$ be a map of action operads. 
\begin{enumerate}
\item The map $f$ induces a functor $f^{*} \colon \Lambda'\mbox{-}\mb{Op} \rightarrow \Lambda\mbox{-}\mb{Op}$ with the property that $(f^{*}Q)(n) = Q(n)$ for every $\Lambda'$-operad $Q$.
\item The map $f$ induces a functor $f_{!} \colon \Lambda\mbox{-}\mb{Op} \rightarrow \Lambda'\mbox{-}\mb{Op}$, where $(f_{!}P)(n)$ is defined by the coequalizer below,
    \[
        \xy
            (-10,0)*+{P(n) \times \Lambda(n) \times \Lambda'(n)}="00";
            (30,0)*+{P(n) \times \Lambda'(n)}="10";
            (60,0)*+{\coeqb{P(n)}{\Lambda'(n)}{\Lambda(n)}}="20";
            {\ar@<1ex>^(.52){1 \times (\star \circ f_n \times 1)} "00" ; "10"};
            {\ar@<-1ex>_(.52){\rho \times 1} "00" ; "10"};
            {\ar^(.45){\varepsilon} "10" ; "20"};
        \endxy
    \]
where $\star \colon \Lambda'(n) \times \Lambda'(n) \to \Lambda'(n)$ is group multiplication and $\rho \colon P(n) \times \Lambda(n) \to P(n)$ is the right action given by the $\Lambda$-operad structure. 
\item The functor $f_{!}$ is left adjoint to $f^*$.
\end{enumerate}
\end{thm}
\begin{proof}
The right action of $\Lambda(n)$ on $(f^{*}Q)(n) = Q(n)$ is given as the composite
\[
Q(n) \times \Lambda(n) \stackrel{1 \times f_n}{\to} Q(n) \times \Lambda'(n) \to Q(n),
\]
where the second map is the action given by the $\Lambda'$-operad structure on $Q$.
This group action, together with the operadic multiplication maps for $Q$ as a $\Lambda'$-operad, give $f^*Q$ a $\Lambda$-operad structure.
Given a map $h \colon P \to Q$ of $\Lambda'$-operads, we must check that the maps $h_n \colon P(n) \to Q(n)$ also constitute a map of $\Lambda$-operads $f^*P \to f^*Q$.
The functions $h_n$ give a map of underlying operads by definition, so we need only verify the equivariance with respect to the $\Lambda(n)$-actions.
This equivariance diagram commutes by the functoriality of products and the definition of $h$ as a map of $\Lambda'$-operads.
It is then straightforward to check the functoriality of these assignments, finishing the proof of the first claim.

For the second claim, we first observe that elements of this coequalizer are equivalence classes $[p,\tau]$ where $p \in P(n)$, $\tau \in \Lambda'(n)$, and the relation is given by $[p\cdot \sigma, \tau] = [p, f(\sigma)\tau]$ for $\sigma \in \Lambda(n)$. Then $(f_{!}P)(n)$ inherits a right $\Lambda'(n)$-action by multiplication in the second coordinate.
The coequalizer displayed in the proposition statement is easily seen to be reflexive, with a common section given by mapping a pair $(p, \tau) \in P(n) \times \Lambda'(n)$ to $(p, e_n, \tau) \in P(n) \times \Lambda(n) \times \Lambda'(n)$. Since the product of reflexive coequalizers is again a coequalizer, we define operadic multiplication
\[
m \colon f_{!}P(n) \times f_{!}P(k_1) \times \cdots \times f_{!}P(k_n) \to f_{!}P\left( \sum k_i\right)
\]
to be uniquely determined by the universal property of its source as the coequalizer of a pair of maps 
\begin{equation}\label{eqn:coeq-m}
\big( P(n) \Lambda(n) \Lambda'(n) \big) \times \prod_{i=1}^n \big( P(k_i) \Lambda(n) \Lambda'(k_i) \big) \rightrightarrows \big( P(n) \times \Lambda'(n) \big) \times \prod_{i=1}^n \big( P(k_i) \times \Lambda'(k_i) \big).
\end{equation}
Define a function
\[
\tilde{m} \colon \big( P(n) \times \Lambda'(n) \big) \times \prod_{i=1}^n \big( P(k_i) \times \Lambda'(k_i) \big) \to f_{!}P\left( \sum k_i\right)
\]
by 
\[
\tilde{m}\big( (p,\tau); (p_1, \tau_1), \ldots, (p_n, \tau_n) \big) = \left[ \mu^P(p; p_{\tau^{-1}(1)}, \ldots, p_{\tau^{-1}(n)}), \mu^{\Lambda'}(\tau; \tau_1, \ldots, \tau_n) \right].
\]
The function $\tilde{m}$ will induce the operadic multiplication on $f_{!}P$ once we verify that it coequalizes the two maps in \cref{eqn:coeq-m}.
In order to do so, we must check that
\[
\tilde{m}\big( (p\cdot \sigma,\tau); (p_1\cdot\sigma_1, \tau_1), \ldots, (p_n\cdot\sigma_n, \tau_n) \big) = \tilde{m}\big( (p,f(\sigma)\tau); (p_1, f(\sigma_1)\tau_1), \ldots, (p_n, f(\sigma_n)\tau_n) \big).
\]
By definition the left side is
\begin{equation}\label{eqn:lhs-fshriek}
\left[ \mu^{P}(p\cdot\sigma; p_{\tau^{-1}(1)}\cdot\sigma_{\tau^{-1}(1)}, \ldots, p_{\tau^{-1}(n)}\cdot\sigma_{\tau^{-1}(n)}),\  \mu^{\Lambda'}(\tau; \tau_1, \ldots, \tau_n)            \right],
\end{equation}
while the right side is
\begin{equation}\label{eqn:rhs-fshriek}
\left[\mu^P(p; p_{(f(\sigma)\tau)^{-1}(1)}, \ldots, p_{(f(\sigma)\tau)^{-1}(n)}), \ \mu^{\Lambda'}\big( f(\sigma)\tau; f(\sigma_1)\tau_1, \ldots, f(\sigma_n)\tau_n\big)          \right].
\end{equation}
By the action operad axioms and the fact that $f$ is a map of action operads, we have the equalities
\begin{align*}
\mu\big( f(\sigma)\tau; f(\sigma_1)\tau_1, \ldots, f(\sigma_n)\tau_n\big) &= \mu\big( f(\sigma); f(\sigma_{\tau^{-1}(1)}), \ldots, f(\sigma_{\tau^{-1}(n)})\big)\mu\big( \tau; \tau_1, \ldots, \tau_n\big) \\
& = f\left(\mu\big( \sigma; \sigma_{\tau^{-1}(1)}, \ldots, \sigma_{\tau^{-1}(n)}\big) \right)\mu\big( \tau; \tau_1, \ldots, \tau_n\big).
\end{align*}
By the equality $[p\cdot \sigma, \tau] = [p, f(\sigma)\tau]$, we therefore conclude that \cref{eqn:rhs-fshriek} equals
\[
\left[\mu^P(p; p_{(f(\sigma)\tau)^{-1}(1)}, \ldots, p_{(f(\sigma)\tau)^{-1}(n)}) \cdot \mu\big( \sigma; \sigma_{\tau^{-1}(1)}, \ldots, \sigma_{\tau^{-1}(n)}\big), \mu\big( \tau; \tau_1, \ldots, \tau_n\big) \right].
\]
By the single-equality version of the $\Lambda$-operad equivariance axioms from \cref{rem:single-axiom}, we obtain that the first coordinate can be rewritten as
\begin{align*}
\mu^P(p; p_{(f(\sigma)\tau)^{-1}(1)}, \ldots, p_{(f(\sigma)\tau)^{-1}(n)}) \cdot \mu\big( \sigma; \sigma_{\tau^{-1}(1)}, \ldots, \sigma_{\tau^{-1}(n)}\big) = \\
\mu^P(p\cdot \sigma; p_{(f(\sigma)\tau)^{-1}\big( \sigma(1) \big)}\cdot \sigma_{\tau^{-1}(1)}, \ldots, p_{(f(\sigma)\tau)^{-1}\big( \sigma(n) \big)}\cdot \sigma_{\tau^{-1}(n)}). 
\end{align*}
The indices on the terms $p_{(f(\sigma)\tau)^{-1}\big( \sigma(1) \big)}$ can be simplified using that $f$ is a map of action operads, and hence preserves underlying permutations. Thus 
\begin{align*}
(f(\sigma)\tau)^{-1}\big( \sigma(i) \big) & = \tau^{-1}\left( f(\sigma)^{-1}\left( \sigma(i) \right) \right) \\
& = \tau^{-1}(i)
\end{align*}
because the underlying permutation of $\sigma$ is equal to that of $f(\sigma)$. After substituting these simplifications into the above, we obtain \cref{eqn:lhs-fshriek}, completing the proof that $\tilde{m}$ coequalizes the two maps in \cref{eqn:coeq-m} and therefore induces a unique operadic multiplication on $f_{!}P$. By definition, the operadic multiplication map $m \colon f_{!}P(n) \times f_{!}P(k_1) \times \cdots \times f_{!}P(k_n) \to f_{!}P\left( \sum k_i\right)$ is therefore defined to be
\begin{equation}\label{eqn:defn-m}
m\left( [p,\tau]; [p_1, \tau_1], \ldots, [p_n, \tau_n]\right) = \left[ \mu^P(p; p_{\tau^{-1}(1)}, \ldots, p_{\tau^{-1}(n)}), \mu^{\Lambda'}(\tau; \tau_1, \ldots, \tau_n) \right].
\end{equation}

The unit for $f_{!}P$ is $[\id, e_1]$ where $\id \in P(1)$ is the  unit for $P$ and $e_1 \in \Lambda'(1)$ is the unit for $\Lambda'$. It is straightforward to show that $[\id, e_1]$ acts as a unit for $f_{!}P$ using the unit axioms for $P$ and $\Lambda'$, and we leave these calculations to the reader.

Next we check the associativity axiom for $f_{!}P$.
We do so by checking that the function
\[
\hat{m} \colon \big( P(n) \times \Lambda'(n) \big) \times \prod_{i=1}^n \big( P(k_i) \times \Lambda'(k_i) \big) \to P\left( \sum k_i\right) \times \Lambda'\left(\sum k_i\right)
\]
given by the formula
\[
\hat{m}\left(  (p,\tau); (p_1, \tau_1), \ldots, (p_n, \tau_n)             \right)  = \left( \mu^P(p; p_{\tau^{-1}(1)}, \ldots, p_{\tau^{-1}(n)}), \mu^{\Lambda'}(\tau; \tau_1, \ldots, \tau_n) \right)
\]
satisfies associativity with respect to operadic composition.
The actual operadic composition is then obtained from $\hat{m}$ by passing to equivalence classes via the coequalizer in \cref{eqn:coeq-m}, so associativity of $\hat{m}$ will ensure the associativity of $m$.
First note that the second coordinate of the operadic composite $\hat{m}\left(  (p,\tau); (p_1, \tau_1), \ldots, (p_n, \tau_n)             \right)$ is $\mu^{\Lambda'}(\tau; \tau_1, \ldots, \tau_n)$, so associativity in the second coordinate follows immediately from associativity of $\Lambda'$. 

In order to check associativity in the first coordinate, we introduce the following notation.
We write a list $a_1, \ldots, a_n$ as $\underline{a_i}$. If $\sigma \in \Sigma_n$, we write $\sigma \bullet_i \underline{a_i}$ for the list $a_{\sigma^{-1}(1)}, \ldots, a_{\sigma^{-1}(n)}$. Then the first coordinate of
\[
\hat{m}\left( (p,\tau); \underline{ \hat{m}\left( (p_i, \tau_i); \underline{ (p_{i,j}, \tau_{i,j})} \right) } \right)
\]
is $\mu\left( p; \tau \bullet_i \underline{ \mu(p_i; \tau_i \bullet_j \underline{p_{i,j}}) } \right)$. 
By the associativity of $P$, the first coordinate is therefore equal to
\begin{equation}\label{eqn:firstcoord}
\mu\left( \mu(p; \tau \bullet_i \underline{p_i}); \tau \bullet_i \underline{\tau_i \bullet_j \underline{p_{i,j}}} \right).
\end{equation}
On the other hand, the first coordinate of
\[
\hat{m}\left( \hat{m}\left( (p,\tau); \underline{ (p_i, \tau_i) }\right); \underline{ (p_{i,j}, \tau_{i,j}) } \right)
\]
is $\mu\left( \mu(p; \tau \bullet_i \underline{p_i}); \mu(\tau; \underline{\tau_i}) \bullet_{i,j} \underline{p_{i,j}} \right)$ where $\underline{p_{i,j}}$ is ordered lexicographically and $\bullet_{i,j}$ means that $\mu(\tau; \underline{\tau_i})$ acts upon this list. By \cref{eqn:mu-from-betadelta} from the proof of \cref{thm:charAOp}, we have
\begin{align*}
\mu(\tau; \underline{\tau_i}) \bullet_{i,j} \underline{p_{i,j}} & = \delta(\tau)\beta(\underline{\tau_i}) \bullet_{i,j} \underline{p_{i,j}} \\
& = \delta(\tau) \bullet_{i,j} \underline{ \tau_i \bullet_j \underline{p_{i,j}}} \\
& = \tau \bullet_i \underline{\tau_i \bullet_j \underline{p_{i,j}}}.
\end{align*}
Therefore the first coordinate of $\hat{m}\left( \hat{m}\left( (p,\tau); \underline{ (p_i, \tau_i) }\right); \underline{ (p_{i,j}, \tau_{i,j}) } \right)$ is
\begin{align*}
\mu\left( \mu(p; \tau \bullet_i \underline{p_i}); \mu(\tau; \underline{\tau_i}) \bullet_{i,j} \underline{p_{i,j}} \right) = \mu\left( \mu(p; \tau \bullet_i \underline{p_i}); \tau \bullet_i \underline{\tau_i \bullet_j \underline{p_{i,j}}} \right),
\end{align*}
matching \cref{eqn:firstcoord} and verifying operadic associativity.

Finally we check the equivariance axiom in the form of \cref{rem:single-axiom}. This axiom is the equality
\[
m\left( [p,\tau]; \underline{[p_i, \tau_i]}\right)\cdot \mu(\omega; \underline{\omega_i}) = 
m\left( [p,\tau]\cdot \omega; [p_{\omega(1)}, \tau_{\omega(1)}]\cdot \omega_1, \ldots, [p_{\omega(n)}, \tau_{\omega(n)}]\cdot \omega_n \right).
\]
Using the formula for $m$, it is straightforward to verify that both sides are equal to
\[
\left[ \mu(p; \tau \bullet_i \underline{p_i}), \mu(\tau \omega; \tau_{\omega(1)}\omega_1, \ldots, \tau_{\omega(n)}\omega_n) \right].
\]
Thus the equivariance axiom for a $\Lambda'$-operad holds for $f_{!}P$, and completes the proof that $f_{!}P$ is a $\Lambda'$-operad.

Next we turn to the functoriality of $f_{!}$. Let $g \colon P \to Q$ be a map of $\Lambda$-operads. Define $f_{!}g \colon f_{!}P \to f_{!}Q$ by the formula
\begin{equation}\label{eqn:fshriek-g}
(f_{!}g)_n\left( [p, \tau] \right) = [g(p), \tau],
\end{equation}
for $[p, \tau] \in f_{!}P(n)$.
Since $g$ is a map of $\Lambda$-operads, it preserves the identity elements, so
\[
(f_{!}g)\left( [\id, e_1] \right) = [g(\id), e_1] = [\id, e_1],
\]
showing that $f_{!}g$ also preserves identity elements. It is clear that $f_{!}g$ is levelwise equivariant with respect to the $\Lambda'(n)$-actions, so we need only check that it preserves operadic multiplication. We leave this calculation to the reader, as it is a straightforward application of the fact that $g$ is a map of $\Lambda$-operads so preserves operadic multiplication. This completes the definition of $f_{!}$ on morphisms. It is immediate that $f_{!}$ preserves composition and identity maps, and is thus a functor 
\[ f_{!} \colon \Lambda\mbox{-}\mb{Op} \rightarrow \Lambda'\mbox{-}\mb{Op}\]
as desired, completing the proof of the second claim in the statement.

We now prove the third claim, that $f_{!}$ is left adjoint to $f^*$.
The unit of this adjuntion has a component at the $\Lambda$-operad $P$ given by a map $\eta^P \colon P \to f^*f_{!}P$, and is defined by the formula
\[
\eta^{P}_n(p) = [p, e_n]
\]
for all $p \in P(n)$. The map $\eta^P$ preserves the operadic identity by definition, and it preserves operadic multiplication by a simple application of \cref{eqn:defn-m} defining operadic multiplication in $f_{!}P$. Furthermore, $\eta^P$ preserves the right $\Lambda$-actions because
\begin{align*}
\eta^{P}(p\cdot \tau) & = [p \cdot \tau, e_n] \\
& = [p, f(\tau)e_n] \\
& = [p, e_n] \cdot \tau \\
& = \eta^P(p) \cdot \tau.
\end{align*}
Thus $\eta^P$ is a map of $\Lambda$-operads. It is then simple to check that these components define a natural transformation $1 \Rightarrow f^* f_{!}$.

The counit of this adjunction has a component at the $\Lambda'$-operad $Q$ given by a map $\varepsilon^Q \colon f_{!}f^*Q \to Q$, and is defined by the formula
\[
\varepsilon^Q_n\left( [q,\tau] \right) = q \cdot \tau.
\]
Since $f_{!}f^*Q(n)$ is defined to be $f^*Q(n) \otimes_{\Lambda(n)} \Lambda'(n)$ and the action of $\Lambda(n)$ on  $f^*Q(n)$ is given by $q \cdot_{f^*Q} \sigma = q \cdot_{Q} f(\sigma)$, the equivalence relation defining $f_!f^*Q(n)$ is generated by the equalities
\[
[q \cdot_{Q} f(\sigma), \tau] = [q, f(\sigma)\tau]
\]
for all $\sigma \in \Lambda(n)$. In particular, the formula for $\varepsilon^Q_n$ is well-defined on equivalence classes. It is obvious that $\varepsilon^Q$ preserves the operadic identity and the right $\Lambda'(n)$-actions, so we only need to show that it preserves operadic multiplication. We therefore compute that
\begin{align*}
\varepsilon^Q \left( m\left( [q, \tau]; \underline{ [q_i, \tau_i] } \right) \right) & = \varepsilon^Q\left( [\mu(q; \tau \bullet_i \underline{q_i}), \mu(\tau; \underline{\tau_i}) ] \right) \\
& = \mu(q; \tau \bullet_i \underline{q_i}) \cdot \mu(\tau; \underline{\tau_i}) \\
& = \mu(q \cdot \tau; \underline{q_i \cdot \tau_i}) \\
& = m\left( \varepsilon^Q[q,\tau]; \underline{\varepsilon^Q[q_i, \tau_i]}\right)
\end{align*}
by the definition of $m$, the definition of $\varepsilon^Q$, the equation in \cref{rem:single-axiom}, and the definition of $\varepsilon^Q$ again.
Thus $\varepsilon^Q$ preserves operadic multiplication, and is a map of $\Lambda'$-operads. As with $\eta$, naturality in $Q$ is simple to check.

For a $\Lambda$-operad $P$, the composite $\varepsilon^{f_{!}P} \circ f_{!}\eta^{P}$ is given by
\begin{align*}
\varepsilon^{f_{!}P} \circ f_{!}\eta^{P}[p, \tau] & = \varepsilon^{f_{!}P}\left[ [p,e_n], \tau\right] \\
& = [p, e_n \tau]\\
& = [p, \tau],
\end{align*}
so is the identity. Likewise, for a $\Lambda'$-operad $Q$ the composite $f^*\varepsilon^Q \circ \eta^{f^*Q}$ is given by
\begin{align*}
f^*\varepsilon^Q \circ \eta^{f^*Q}(q) & = f^*\varepsilon^Q[q,e_n] \\
& = q \cdot e_n \\
& = q,
\end{align*}
so is also the identity. These two calculations verify the triangle identities, and therefore prove that $f_{!} \dashv f^*$.
%
%
%\ngnoteil{Moved from a proof that was below, needs rewriting:}
%Given any map of monoids $f \colon M \rightarrow N$ in a monoidal category, there exists an adjunction between right $M$-modules and right $N$-modules given by $f^{*}$ as the right adjoint and $A \mapsto A \otimes_{M} N$ as the left adjoint. Thus we define
%  \[
%    S(P)(n) = \coequ{P}{\Sigma}{\Lambda}{n},
%  \]
%and this inherits a right $\Sigma_{n}$-action by multiplication. The unit of $S(P)$ is
%  \[
%    * \stackrel{\eta}{\longrightarrow} P(1) \longrightarrow \coequ{P}{\Sigma}{\Lambda}{1} \cong P(1)/\Lambda(1).
%  \]
%For the multiplication, let $K = k_1 + \cdots + k_n$, so we must define
%% \[
%% \mu \colon (\coequ{P}{\Sigma}{\Lambda}{n}) \times (P(k_1) \times_{\Lambda(k_1)} \Sigma_{k_1}) \times \cdots \times (P(k_n) \times_{\Lambda(k_n)} \Sigma_{k_n}) \rightarrow P(K) \times_{\Lambda(K)} \Sigma_{K}.
%% \]
%  \[
%    \mu \colon \left(\coequ{P}{\Sigma}{\Lambda}{n}\right) \times \prod_{i=1}^n \left(\coequ{P}{\Sigma}{\Lambda}{k_i}\right) \rightarrow \coequ{P}{\Sigma}{\Lambda}{K}.
%  \]
%Using the universal property of the coequalizer, this is induced by the following composite.
%
%  \begin{align*}
%    (P(n) \times \Sigma_{n}) \times \prod_{i=1}^n \left(P(k_i) \times \Sigma_{k_i}\right) &\cong \left(P(n) \times \prod_{i=1}^n P(k_{i}) \right) \times \left(\Sigma_{n} \times \prod_{i=1}^n \Sigma_{k_{i}} \right)\\
%    &\xrightarrow{\mu^P \times \mu^{\Sigma}} P(K) \times \Sigma_{K}\\
%    &\longrightarrow  \coequ{P}{\Sigma}{\Lambda}{K}
%  \end{align*}
%
%We leave verification of the associativity, unit, and equivariance axioms to the reader; they are simple applications of the same axioms for $P$ and $\Sigma$ together with some colimit universal properties and the $\Lambda$-operad axioms for $P$. It is then straightforward to check the bijection between $\Lambda$-operad maps $P \rightarrow \pi^{*}Q$ and symmetric operad maps $S(P) \rightarrow Q$, thus establishing the adjunction.
\end{proof}



We will examine the adjunction from \cref{thm:pbaop} further in the case that the map $f$ is the underlying permutation map $\pi \colon \Lambda \to \Sigma$ for an action operad $(\Lambda, \pi)$. 

\begin{Defi}\label{Defi:symmetrization}
Let $(\Lambda, \pi)$ be an action operad. The left adjoint $\pi_{!}$ from \cref{thm:pbaop} is called the \emph{symmetrization functor}.
\end{Defi}

\begin{prop}\label{prop:unit-pi-star}
Let $(\Lambda, \pi)$ be an action operad. The unit of the adjunction $\pi_{!} \dashv \pi^*$ from \cref{thm:pbaop} is an isomorphism if and only if $\Lambda \cong \Sigma$ via $\pi$.
\end{prop}
\begin{proof}
The component $\eta^{P} \colon P \to \pi^* \pi_{!} P$ of the unit at a $\Lambda$-operad $P$ is defined by the formula
\[
\eta^{P}_n(p) = [p, e_n].
\]
Taking $\Lambda$ as a $\Lambda$-operad, we see that $\pi^*\pi_{!}\Lambda$ can be chosen to be $\Sigma_n$, in which case the map $\eta^{\Lambda}_n$ is just $\pi_n$.
The unit $\eta$ can only be an isomorphism if each $\eta^P$ is, so it is a necessary condition that $\Lambda \cong \Sigma$ via $\pi$.
Sufficiency of this condition is obvious by the formulas defining $f^*, f_{!}$ applied to an isomorphism $f$, completing the proof.
\end{proof}

\begin{prop}\label{prop:counit-pi-star}
Let $(\Lambda, \pi)$ be an action operad. The counit of the adjunction $\pi_{!} \dashv \pi^*$ from \cref{thm:pbaop} is an isomorphism if and only if $\pi \colon \Lambda \to \Sigma$ is surjective.
\end{prop}
\begin{proof}
For a symmetric operad $Q$, the counit $\varepsilon^Q \colon \pi_{!}\pi^*Q \to Q$ is defined on the $n$-ary operations by
\[
\varepsilon^Q_n\left( [q,\tau] \right) = q \cdot \tau,
\]
where $q \in Q(n)$ and $\tau \in \Sigma_n$. This function is surjective for any action operad $\Lambda$ and any $\Lambda$-operad $Q$, so we only check injectivity. 

When $\pi \colon \Lambda \to \Sigma$ is not surjective, it is the zero map by \cref{prop:surjortriv}.
The equivalence relation defining $\pi_{!}\pi^*Q(n)$ is $[q \cdot_{\pi^*Q} \lambda, \tau] = [q, \pi(\lambda)\tau]$ for $q \in Q(n)$, $\lambda \in \Lambda(n)$, and $\tau \in \Sigma_n$, but $\pi(\lambda) = e_n \in \Sigma_n$. Furthermore, the action $q \cdot_{\pi^*Q} \lambda$ is computed in $\pi^*Q(n)$, so is actually 
\[
q \cdot_{\pi^*Q} \lambda = q \cdot_{Q} \pi(\lambda) = q.
\]
These calculations show that the equivalence relation degenerates to $[q,\tau] = [q, \tau]$, so $\pi_{!}\pi^*Q(n) \cong Q(n) \times \Sigma_n$, and the counit map is just given by the group action of $\Sigma_n$ on $Q(n)$, so in particular is not injective.

Now assume that $\pi \colon \Lambda \to \Sigma$ is surjective, and assume that $\varepsilon^Q_n\left( [q_1,\tau_1] \right) = \varepsilon^Q_n\left( [q_2,\tau_2] \right)$, or equivalently that
\[
q_1 \cdot \tau_1 = q_2 \cdot \tau_2.
\]
We must check that $[q_1, \tau_1] = [q_2, \tau_2]$. Then for any $\lambda \in \Lambda(n)$ such that $\pi(\lambda) = \tau_1 \tau_2^{-1}$, we have
\begin{align*}
[q_1, \tau_1] & = [q_1, \pi(\lambda)\pi(\lambda^{-1})\tau_1] \\
& = [q_1 \pi(\lambda), \pi(\lambda^{-1})\tau_1] \\
& = [q_1\tau_1\tau_2^{-1}, \tau_2\tau_1^{-1}\tau_1] \\
& = [q_2, \tau_2],
\end{align*}
proving that $\varepsilon^Q_n$ is injective and completing the proof that if $\pi$ is surjective then $\varepsilon$ is an isomorphism.
\end{proof}

%\begin{prop}\label{prop:e-fun}
%The assignment sending a set $X$ to its endomorphism operad $\mathcal{E}_X$ (\cref{ex:endo}) is the object part of a functor $\mathcal{E} \colon \mb{Sets} \to \Sigma\mbox{-}\mb{Op}$.
%\end{prop}
%\begin{proof}
%define on morphisms, check functoriality
%\end{proof}

The following statement appears in \cite{maygeom} as Lemma 1.4.
\begin{lem}\label{lem:alg=map}
Let $P$ be a symmetric operad and $X$ be a set. $P$-algebra structures on $X$, given by $\{ \alpha_n \colon  \coeq{P}{X}{\Sigma}{n} \rightarrow X\}$ as in \cref{Defi:aop-alg}, are in bijection with maps of symmetric operads $\alpha \cn P \to \mathcal{E}_X$.
\end{lem}
\begin{proof}
A function $\tilde{\alpha}_n \colon P(n) \times X^n \to X$ corresponds, under the hom-tensor adjunction $- \times X^n \dashv [X^n, -]$, to a function $\hat{\alpha}_n \colon P(n) \to \mathcal{E}_X(n)$. 
The unit axiom in \cref{Defi:sym_op_map} for the function $\hat{\alpha}_1$ corresponds to the first axiom in \cref{Defi:aop-alg} for $P$ as a nonsymmetric operad.
The associativity axiom in \cref{Defi:sym_op_map} for the functions $\hat{\alpha}_n$ corresponds to the second axiom in \cref{Defi:aop-alg} for $P$ as a nonsymmetric operad.
The function $\hat{\alpha}_n$ commutes with the right $\Sigma_n$-actions if and only if the function $\tilde{\alpha}_n$ is obtained as in \cref{conv:equiv-maps} from a function $\alpha_n \colon \coeq{P}{X}{\Sigma}{n} \rightarrow X$, completing the proof of the bijection.
\end{proof}

\begin{cor}\label{cor:pi-star}
Let $\Lambda$ be an action operad with underlying permutation map $\pi \colon \Lambda \to \Sigma$. 
 For any $\Lambda$-operad $P$ and any set $X$, $P$-algebra structures on $X$ are in bijection with 
\begin{itemize}
\item maps of $\Lambda$-operads $\alpha \colon P \to \pi^* \mathcal{E}_X$ or
\item maps of symmetric operads $\alpha' \colon \pi_{!}P \to  \mathcal{E}_X$.
\end{itemize}
\end{cor}
\begin{proof}
By the definition of the $\Lambda(n)$-actions on $P(n)$ and $X^n$, the maps \[\coeq{P}{X}{\Lambda}{n} \rightarrow X\] defining a $P$-algebra structure in \cref{Defi:aop-alg} are in bijection with 
$\Lambda(n)$-equivariant maps $P(n) \to \pi^*\mathcal{E}_X(n)$. The correspondence between the axioms in \cref{Defi:aop-alg} and the map of $\Lambda$-operad axioms (\cref{Defi:aop_map}) follows just as in the proof of \cref{lem:alg=map}. The equivalence between the $\Lambda$- and symmetric operads versions follows immediately from adjointness, \cref{thm:pbaop}.
%\ngnoteil{this is the old stuff, need to rewrite}
%Claim 1 is part one of \cref{thm:pbaop} applied to $\pi$ via \cref{prop:pi-in-aop}.
%Claim 2 is part three of \cref{thm:pbaop} and part two of \cref{lem:alg=map}.
%Claim 3\ngnote{follows from adjointness}.
\end{proof}

%\begin{lem}
%Let $\Lambda$ be an action operad, and let $X$ be a set. Then $\mathcal{E}_{X}$ carries a canonical $\Lambda$-operad structure.
%\end{lem}
%\begin{proof}
%$\mathcal{E}_{X}$ is a symmetric operad, so we define the actions by
%  \[
%    \mathcal{E}_{X}(n) \times \Lambda(n) \stackrel{1 \times \pi_{n}}{\longrightarrow} \mathcal{E}_{X}(n) \times \Sigma_{n} \rightarrow \mathcal{E}_{X}(n).
%  \]
%\end{proof}
%
%The previous result is really a change-of-structure-groups result. We record the general result as the following proposition.
%
%
%
%We can now use endomorphism operads to characterize algebra structures.
%
%\begin{prop}\label{endoalg}
%Let $X$ be a set, and $P$ a $\Lambda$-operad. Then algebra structures on $X$ are in 1-to-1 correspondence with $\Lambda$-operad maps $P \rightarrow \mathcal{E}_{X}$.
%\end{prop}
%\begin{proof}
%A map $P(k) \rightarrow \mathcal{E}_{X}(k)$ corresponds, using the closed structure on $\mb{Sets}$, to a map $P(k) \times X^{k} \rightarrow X$. The monoid homomorphism axioms give the unit and associativity axioms, and the requirement that $P \rightarrow \mathcal{E}_{X}$ be a map of $\Lambda$-operads gives the equivariance condition.
%\end{proof}


%\section{\texorpdfstring{$\Lambda$}{L}-Operads as Monads}\label{sec:lop-monad}
%
%This section revisits the theory of monads associated to operads, now in the context of $\Lambda$-operads.
%For many purposes, the monad associated to a $\Lambda$-operad contains all the information that is needed, as we shall see below.

\begin{Defi}[(Endofunctor induced by a $\Lambda$-operad)]\label{Defi:und-P}
Let $P$ be a $\Lambda$-operad. Then $P$ induces an endofunctor of $\mb{Sets}$, denoted $\underline{P}$, by the following formula.
  \[
	 \underline{P}(X) = \coprod_n \coeq{P}{X}{\Lambda}{n}
  \]
\end{Defi}

We now have the following proposition; its proof is standard (see the discussion in Construction 2.4 of \cite{maygeom}), and we leave it to the reader.

\begin{prop}\label{prop:op=monad1}  Let $P$ be a $\Lambda$-operad.
  \begin{enumerate}
    \item The $\Lambda$-operad structure on $P$ induces a monad structure on $\underline{P}$ via the operadic multiplication and operadic identities for $P$. We denote this monad $(\underline{P}, \mu, \id)$, or just $\underline{P}$ when $\mu, \id$ are understood.
    \item The category of algebras for the $\Lambda$-operad $P$ is isomorphic to the category of algebras for the monad $(\underline{P}, \mu, \id)$.
  \end{enumerate}
\end{prop}


In the case that we take the operad $P$ to also be $\Lambda$, we do not get algebras more interesting than monoids.
\begin{prop}\label{prop:Lalg=monoid}
Let $\Lambda$ be an action operad. The category of algebras for $\Lambda$ taken as a $\Lambda$-operad, $\Lambda\mbox{-}\mb{Alg}$, is isomorphic to the category of monoids.
\end{prop}
\begin{proof}
The category of monoids is $\underline{T}\mbox{-}\mb{Alg}$ where $T$ is the terminal action operad, so we will produce an isomorphism of monads $R \colon \underline{T} \cong \underline{\Lambda}$.
For a set $X$, 
\[
\underline{T}(X) = \coprod_n \coeq{T}{X}{T}{n} \cong \coprod_n X^n, 
\]
while 
\[
\underline{\Lambda}(X) = \coprod_n \coeq{\Lambda}{X}{\Lambda}{n}.
\]
The elements of the coequalizer $\coeq{\Lambda}{X}{\Lambda}{n}$ are equivalence classes $[g; x_1, \ldots, x_n]$ under the equivalence relation
	\[
		(gh; x_1, \ldots, x_n) \sim \left(g; x_{h^{-1}(1)}, \ldots, x_{h^{-1}(n)}\right).
	\]
The functions $R_{X;n} \colon \coeq{\Lambda}{X}{\Lambda}{n} \to X^n$ defined by
\[
R_{X;n}\big( \ [g; x_1, \ldots, x_n] \ \big) = \big( x_{g^{-1}(1)}, \ldots, x_{g^{-1}(n)}\big)
\]
are bijections, and are easily seen to be natural in $X$. 
Define $R_X = \coprod_n R_{X;n}$.
We leave it to the reader that these components also commute with the multiplication and unit of the monads $\underline{T}, \underline{\Lambda}$, so produce the desired isomorphism of monads.
The isomorphism of monads $R$ then induces an isomorphism between categories of algebras, proving the desired claim.
%
%The key observation here is that, for each $n \in \mathbb{N}$,
%	\[
%		\coeq{\Lambda}{X}{\Lambda}{n} \cong X^n.
%	\]
%We will describe this bijection and leave the rest of the proof to the reader, which falls out of the various axioms either for being a monoid or for being a $\Lambda$-algebra.
%
%Recall that the elements of $\coeq{\Lambda}{X}{\Lambda}{n}$ are equivalence classes of the form $[g ; x_1, \ldots, x_n]$ for which
%	\[
%		(gh; x_1, \ldots, x_n) \sim \left(g; x_{h^{-1}(1)}, \ldots, x_{h^{-1}(n)}\right).
%	\]
%There is an obvious map $X^n \rightarrow \coeq{\Lambda}{X}{\Lambda}{n}$ sending $(x_1, \ldots, x_n)$ to the equivalence class $[e; x_1, \ldots, x_n]$. The inverse to this map is given by the map $\coeq{\Lambda}{X}{\Lambda}{n} \rightarrow X^n$ sending $[g;x_1,\ldots,x_n]$ to the element $(x_{g^{-1}(1)},\ldots,x_{g^{-1}(n)})$. It is then clear that these are inverses, relying on the equivalence relation to see that
%	\[
%		[g;x_1,\ldots,x_n] = \left[e;x_{g^{-1}(1)},\ldots,x_{g^{-1}(n)}\right].
%	\]
%That the second map is well-defined is simple to show.
\end{proof}

The monad-theoretic incarnation of \cref{cor:pi-star} is then the following.

\begin{cor}\label{cor:sym-preserve-alg}
Let $(\Lambda, \pi)$ be an action operad.
For any $\Lambda$-operad P, there exists a natural isomorphism of monads between $\underline{P}$ and $\underline{\pi_{!}P}$. In particular, these monads (and hence operads) have isomorphic categories of algebras.
\end{cor}
\begin{proof}
The isomorphism is induced by the universal property of the coequalizer by noting that $\coeq{P}{X}{\Lambda}{n}$, the $n$th summand in $\underline{P}(X)$, and $\big(\coequ{P}{\Sigma}{\Lambda}{n}\big)\otimes_{\Sigma_n} X^n$, the $n$th summand in $\underline{\pi_{!}P}(X)$, both satisfy the same universal property.
%\ngnoteil{actually show the calculation, plus fix notation since $S$ is now $\pi_{!}$}
%The first claim is a simple calculation using the coequalizer that defines $S(\pi^{*}Q)$, using that $Q(n)$ is itself the coequalizer of the obvious pair of maps $Q(n) \times \Sigma_{n} \times \Sigma_{n}$.
%
%\ngnoteil{actually show the calculation, again!}
%For the second claim, we find a natural isomorphism
%  \[
%    \coeq{P}{X}{\Lambda}{n} \cong (\coequ{P}{\Sigma}{\Lambda}{n}) \times_{\Sigma_{n}} X^{n}
%  \]
%by the universal property of the colimits involved, so as functors $\underline{P} \cong \underline{S(P)}$. One can then easily verify that this isomorphism commutes with the unit and multiplication of the two monads involved using calculations similar to those used to establish the adjunction.
\end{proof}

%\begin{rem}
%\begin{enumerate}
%\item The adjunction alone is enough to establish that $P$ and $S(P)$ have isomorphic categories of algebras using \cref{endoalg}.
%\item This theorem shows that semantically, one need never consider any kind of operad aside from symmetric operads: any other kind of operad can be symmetrized without altering the algebras. But as the operad should be considered a finer level of detail than the monad, restricting to symmetric operads misses the structure present in the more nuanced group actions.
%
%\item Furthermore, there is clearly an artifact left from only considering the algebras themselves as objects in a symmetric monoidal category. It is well-known that a braided structure is all that is required for non-symmetric operads, and so one is left to consider that the natural home for algebras over a $\Lambda$-operad might be a type of monoidal structure other than symmetric in which case the theorem above gives no insight.
%\end{enumerate}
%\end{rem}

%\ngnoteil{I can't find where we use any of this stuff. I will leave it in for now, but am tempted to delete it.}
%
%We end this section by presenting some results which allow us to transfer operad or algebra structures to other categories. We will use the following standard definitions of monad maps and transformations, as per \cite{street-formal}.
%
%\begin{Defi}\label{defi:monad_map}
%Let $S$ be a monad on a category $C$ and $T$ be a monad on a category $D$. A \emph{monad map} of from $S$ to $T$ is a functor $F \colon C \rightarrow D$ together with a natural transformation $\alpha \colon TF \Rightarrow FS$ such that the following diagrams commute.
%
% \[
%    \xy
%      (0,0)*+{FX}="a";
%      (20,10)*+{TFX}="b";
%      (20,-10)*+{FSX}="c";
%      {\ar^{\eta^T_{FX}} "a" ; "b"};
%      {\ar^{\alpha_X} "b" ; "c"};
%      {\ar_{F\eta^S_X} "a" ; "c"};
%      (40,0)*+{T^2FX}="a";
%      (60,10)*+{TFSX}="b";
%      (85,10)*+{FS^2X}="c";
%      (60,-10)*+{TFX}="d";
%      (85,-10)*+{FSX}="e";
%      {\ar^{T\alpha_X} "a" ; "b"};
%      {\ar^{\alpha_{SX}} "b" ; "c"};
%      {\ar^{F\mu^S_X} "c" ; "e"};
%      {\ar_{\mu^T_{FX}} "a" ; "d"};
%      {\ar_{\alpha_X} "d" ; "e"};
%    \endxy
%  \]
%
%A \emph{transformation} $\Gamma \colon (F, \alpha) \Rightarrow (G, \beta)$ between monad maps is a natural transformation $\Gamma \colon F \Rightarrow G$ such that the following diagram commutes.
%  
%  \[
%    \xy
%      (0,0)*+{TFX}="a";
%      (20,0)*+{TGX}="b";
%      (0,-15)*+{FSX}="c";
%      (20,-15)*+{GSX}="d";
%      %
%      {\ar^{T\Gamma_X} "a" ; "b"};
%      {\ar^{\beta_X} "b" ; "d"};
%      {\ar_{\alpha_X} "a" ; "c"};
%      {\ar_{\Gamma_{SX}} "c" ; "d"};
%    \endxy
%  \]
%\end{Defi}
%
%\begin{rem}
%Every monad map $(F,\alpha)$ induces a functor $S\Alg \rightarrow T\Alg$ on the categories of algebras. An $S$-algebra $(X,\sigma)$ is sent to the $T$-algebra $(FX,F\sigma \cdot \alpha_X)$, as we now describe. For $(FX,F\sigma \cdot \alpha_X)$ to be a $T$-algebra we require the usual diagrams to commute, shown as the outside of the diagrams below.
%
%  \[
%    \xy
%      (0,0)*+{T^2FX}="a";
%      (20,0)*+{TFSX}="b";
%      (40,0)*+{TFX}="c";
%      (0,-30)*+{TFX}="d";
%      (20,-15)*+{FS^2X}="f";
%      (20,-30)*+{FSX}="e";
%      (40,-15)*+{FSX}="g";
%      (40,-30)*+{FX}="h";
%      {\ar^{T\alpha_X} "a" ; "b"};
%      {\ar^{TF\sigma} "b" ; "c"};
%      {\ar^{\alpha_X} "c" ; "g"};
%      {\ar^{F\sigma} "g" ; "h"};
%      {\ar_{\mu^T_{FX}} "a" ; "d"};
%      {\ar_{\alpha_X} "d" ; "e"};
%      {\ar_{F\sigma} "e" ; "h"};
%      {\ar_{\alpha_{SX}} "b" ; "f"};
%      {\ar_{F\mu^S_X} "f" ; "e"};
%      {\ar^{FS\sigma} "f" ; "g"};
%      (60,0)*+{FX}="a1";
%      (85,0)*+{TFX}="b1";
%      (85,-15)*+{FSX}="c1";
%      (85,-30)*+{FX}="d1";
%      {\ar^{\eta^T_{FX}} "a1" ; "b1"};
%      {\ar^{\alpha_X} "b1" ; "c1"};
%      {\ar^{F\sigma} "c1" ; "d1"};
%      {\ar^{F\eta^S_X} "a1" ; "c1"};
%      {\ar_{\id} "a1" ; "d1"};
%    \endxy
%  \]
%
%The first diagram commutes since the left hand side is the second diagram required to commute for $(F,\alpha)$ to be a monad map, the square at the top right is an instance of naturality for $\alpha$, while the bottom right square commutes since $(X,\sigma)$ is an $S$-algebra. The second diagram commutes since the top triangle is again a requirement of $\alpha$ being a transformation, with the lower triangle commuting again as a result of $(X,\sigma)$ being an $S$-algebra.
%
%A morphism $f \colon  (X, \sigma_X) \rightarrow (Y, \sigma_Y)$ of $S$-algebras is sent to the morphism
%  \[
%    Ff \colon  (FX, F\sigma_X \cdot \alpha_X) \rightarrow (FY, F\sigma_Y \cdot \alpha_Y),
%  \]
%this being a map of $T$-algebras following from the naturality of $\alpha$ and of $f$ being an $S$-algebra map. Functoriality follows from that of $F$.
%\end{rem}
%
%Throughout the text we make reference to where results can be applied in a more general case where a symmetric monoidal category is cocomplete and for which the tensor product distributes over colimits in each variable. However, we include the following definition to be clear what is meant simply by a cocomplete symmetric monoidal category.
%\begin{Defi}\label{cocom_symm_mon_cat}
%A cocomplete symmetric monoidal category $\m{C}$ is a symmetric monoidal category for which the underlying category is cocomplete.
%% and the endofunctor $- \otimes X \colon \m{C} \rightarrow \m{C}$ preserves colimits for all objects $X \in \m{C}$.
%% QQQ Is this what we mean by a cocomplete symmetric monoidal category? The statement of the following theorem 3.3.7 then requires that the tensor product preserves colimits in each variable but the definition already includes this. QQQ
%\end{Defi}
%The following three results tie in with material in the coming chapters but are of a general nature which better in the context of this section.
%
%
%\begin{prop}\label{monoidal_to_monadmap}
%Let $C,D$ be cocomplete symmetric monoidal categories. Let $\Lambda$ be an action operad, and $P$ be a $\Lambda$-operad in $C$. Let $F \colon C \rightarrow D$ be a symmetric lax monoidal functor. Then $FP$ is a $\Lambda$-operad in $D$, and there exists a monad map $(F,\psi) \colon (C,\underline{P}) \rightarrow (D, \underline{FP})$.
%\end{prop}
%\begin{proof}
%\cref{preserveGop} describes how the functor $F$ can be used to describe a functor
%  \[
%    \Lambda\mbox{-}\mb{Op}(C) \rightarrow \Lambda\mbox{-}\mb{Op}(D),
%  \]
%from which we see that $FP$ is a $\Lambda$-operad in $D$.
%
%The functor $F$ constitutes the $1$-cell of the monad map, while $\psi$ is required to be a natural transformation as below.
%  \[
%    \xy
%      (0,0)*+{C}="a";
%      (20,0)*+{D}="b";
%      (0,-20)*+{C}="c";
%      (20,-20)*+{D}="d";
%      %
%      {\ar^{F} "a" ; "b"};
%      {\ar^{\underline{FP}} "b" ; "d"};
%      {\ar_{\underline{P}} "a" ; "c"};
%      {\ar_{F} "c" ; "d"};
%      %
%      {\ar@{=>}^{\psi} (12.5, -7.5) ; (7.5,-12.5)};
%    \endxy
%  \]
%
%We describe the components of this natural transformation at an object $X$ of $C$ below.
%  \begin{align*}
%    \underline{FP}(FX) &= \coprod_{n \in \mathbb{N}} FP(n) \otimes_{\Lambda(n)} (FX)^n \\
%    &\rightarrow \coprod_{n \in \mathbb{N}} F\left(P(n) \otimes_{\Lambda(n)} X^n\right)\\
%    &\rightarrow F\left(\coprod_{n \in \mathbb{N}} P(n) \otimes_{\Lambda(n)} X^n\right)\\
%    &=F(\underline{P}(X))
%  \end{align*}
%The first morphism is a composite of the coherence cells of the type
%  \[
%    FX \otimes FY \rightarrow F(X \otimes Y)
%  \]
%for the symmetric lax monoidal functor $F$, while the second morphism is the induced morphism out of the coproduct. Naturality follows from that of the component morphisms. It is then straightforward to see that the monad morphism diagrams commute since the diagrams involved consist of instances of the coherence axioms for $F$ along with naturality of the coherence cells.
%\end{proof}
%
%\begin{prop}\label{opmap_to_monadmap}
%Let $C$ be a cocomplete symmetric monoidal category. Let $\Lambda$ be an action operad, and $P,Q$ be  $\Lambda$-operads in $C$ with a map $\sigma \colon P \rightarrow Q$ of $\Lambda$-operads between them. Then $\sigma$ induces a monad map $(\id, \sigma^*) \colon (C,\underline{Q}) \rightarrow (C,\underline{P})$ and hence a functor on categories of algebras.
%\end{prop}
%\begin{proof}
%We will first describe the components of the natural transformation $\sigma^* \colon \underline{P} \Rightarrow \underline{Q}$. The component $\sigma^*_X$ at an object $X$ of $C$ is a morphism between the coproducts
%  \[
%    \sigma^*_X \colon \coprod_{n \in \mathbb{N}} P(n) \otimes_{\Lambda(n)} X^n \rightarrow \coprod_{n \in \mathbb{N}} Q(n) \otimes_{\Lambda(n)} X^n.
%  \]
%This is seen to be induced by the universal properties of the coequalizers and coproducts in the following diagram, where $\sigma_n$ denotes the $n$-ary component of the $\Lambda$-operad map $\sigma$ and $\lambda^P$, $\lambda^Q$, $\rho^P$, and $\rho^Q$ denote the usual left and right actions.
%
%  \[
%    \xy
%      (0,0)*+{P(n) \otimes \Lambda(n) \otimes X^n}="a";
%      (50,0)*+{Q(n) \otimes \Lambda(n) \otimes X^n}="b";
%      (0,-20)*+{P(n) \otimes X^n}="c";
%      (50,-20)*+{Q(n) \otimes X^n}="d";
%      (0,-40)*+{P(n) \otimes_{\Lambda(n)} X^n}="e";
%      (50,-40)*+{Q(n) \otimes_{\Lambda(n)} X^n}="f";
%      (0,-60)*+{\coprod_{n \in \mathbb{N}} P(n) \otimes_{\Lambda(n)} X^n}="g";
%      (50,-60)*+{\coprod_{n \in \mathbb{N}} Q(n) \otimes_{\Lambda(n)} X^n}="h";
%      %
%      {\ar^{\rho^P} (2,-3)*{}; (2,-17)*{} };
%      {\ar_{\lambda^P} (-2,-3)*{}; (-2,-17)*{} };
%      {\ar^{\rho^Q} (52,-3)*{}; (52,-17)*{} };
%      {\ar_{\lambda^Q} (48,-3)*{}; (48,-17)*{} };
%      {\ar_{c^P_n} "c" ; "e"};
%      {\ar^{c^Q_n} "d" ; "f"};
%      {\ar "e" ; "g"};
%      {\ar "f" ; "h"};
%      %
%      {\ar^{\sigma_n \otimes \id \otimes \id} "a" ; "b"};
%      {\ar^{{\sigma_n} \otimes \id} "c" ; "d"};
%      {\ar_{\exists! \sigma^*_{n,X}} "e" ; "f"};
%      {\ar^{\exists! \sigma^*_X} "g" ; "h"};      
%    \endxy
%  \]
%
%The upper square which includes $\lambda^P$ and $\lambda^Q$ commutes due to $\sigma$ being a $\Lambda$-operad map, while the square with both $\rho$ actions commutes because the $\sigma_n$ and $\rho$ do not interact. Since $c^Q_n$ coequalizes $\lambda^Q$ and $\rho^Q$, then this commutativity shows that $c^Q_n \cdot (\sigma_n \otimes \id) \cdot \lambda^P = c^Q_n \cdot (\sigma_n \otimes \id) \cdot \rho^P$, hence the morphism $\sigma^*_{n,X}$ exists. The morphism $\sigma^*_X$ is then induced by the universal property of the coproduct $\underline{P}(X)$.
%
%It is then routine to check that these components are natural in $X$ and constitute a monad map. That a functor is then induced on the category of algebras follows from Lemma 6.1.1 of \cite{leinster}; the process is described above, following \cref{defi:monad_map}.
%\end{proof}
%We can combine these two propositions.
%
%\begin{cor}\label{monoidaladj_cor}
%If $C, D, P, F$ are as in \cref{monoidal_to_monadmap}, and $F$ is part of a monoidal adjunction (i.e., an adjunction in which both functors are symmetric lax monoidal, and the unit and counit are monoidal transformations) $F \dashv U$, then $(F, \id)$ and $(U, \id)$ are both monad maps. The unit $\eta \colon 1 \Rightarrow UF$ induces an operad map $\eta \colon P \Rightarrow UFP$, and a transformation between monad maps
%  \[
%    (\id, \id) \Rightarrow (\id, \eta^*) \circ (U, \psi^U) \circ \left(F, \psi^F\right).
%  \]
%The counit $\epz \colon FU \Rightarrow 1$ induces an operad map $\epz \colon FUFP \Rightarrow FP$, and a transformation between monad maps
%  \[
%    \left(F, \psi^F\right) \circ (\id, \eta^*) \circ \left(U,\psi^U\right) \Rightarrow (\id, \id).
%  \]
%These constitute an adjunction $\left(F,\psi^F\right) \dashv (\id, \eta^*) \circ \left(U, \psi^U\right)$ in the $2$-category of monads, and hence induce an adjunction between $\underline{P}$-algebras in $C$ and $\underline{FP}$-algebras in $D$.
%\end{cor}

\section{The Substitution Product}\label{sec:sub}

In this section, we will show that $\Lambda$-operads are the monoids in the category of $\Lambda$-collections equipped with an appropriate substitution product. 
Such a result is fairly standard (see \cite[Section 1.8]{mss-op}), and in both the symmetric and non-symmetric cases can easily be proven directly. 
Since we work with an arbitrary action operad, however, it will be more economical to take the abstract approach using coends and Day convolution.

\begin{Defi}[($\Lambda$-collections)]\label{Defi:BLambda}
Let $\Lambda$ be an action operad.
\begin{enumerate}
\item The category $B\Lambda$ has 
\begin{itemize}
\item objects natural numbers $n \in \N$, and
\item morphism sets $B\Lambda(m,n)$ empty when $m\neq n$
\[
B\Lambda(n,n) = \Lambda(n),
\]
with composition given by group multiplication and identities given by the elements $e_n$.
\end{itemize}
\item The category $\Lambda\mb{\mbox{-}Coll}$ of \emph{$\Lambda$-collections} is the presheaf category
  \[
[B\Lambda^{\textrm{op}}, \mb{Sets}].
  \]
\end{enumerate}
\end{Defi}

%\begin{Defi}
%Let $\Lambda$ be an action operad. The category $\Lambda\mb{\mbox{-}Coll}$ of $\Lambda$-collections has objects $X = \{ X(n) \}_{n \in \N}$ which consist of a set $X(n)$ for each natural number $n$ together with an action $X(n) \times \Lambda(n) \rightarrow X(n)$ of $\Lambda(n)$ on $X(n)$. A morphism $f \colon X \rightarrow Y$ in $\Lambda\mb{\mbox{-}Coll}$ consists of a $\Lambda(n)$-equivariant map $f_{n} \colon X(n) \rightarrow Y(n)$ for each natural number $n$.
%\end{Defi}

\begin{rem}
%QQQ First instance of B\Lambda - replacing with B\Lambda
The definition of $\Lambda\mb{\mbox{-}Coll}$ does not require that $\Lambda$ be an action operad, only that one has a natural number-indexed set of groups. 
%Given any such collection of groups $\{ \Lambda(n) \}_{n \in \N}$, we can form the category $B\Lambda$ whose objects are natural numbers and whose hom-sets are given by $B\Lambda(m,n) = \emptyset$ if $m \neq n$ and $B\Lambda(n,n) = \Lambda(n)$ (where composition and units are given by group multiplication and identity elements, respectively). Then 
%with the opposite category arising from our choice of right actions. A key step in explaining how $\Lambda$-operads arise as monoids in the category of $\Lambda$-collections is to show that being an action operad endows $B\Lambda$ with a monoidal structure.
\end{rem}

\begin{Defi}[(The substitution product $\circ$)]\label{Defi:sub-prod}
Let $\Lambda$ be an action operad, and let $X, Y$ be $\Lambda$-collections. We define the $\Lambda$-collection $X \circ Y$ by
  \[
    X \circ Y (k) = \left(\left( \coprod_{k_{1} + \cdots + k_{r} = k} X(r) \times Y(k_{1}) \times \cdots \times Y(k_{r}) \right) \times \Lambda(k)\right) / \sim
  \]
where the equivalence relation is generated by the following.
\begin{enumerate}
\item For $x \in X(r)$, $h \in \Lambda(r)$, $y_i \in Y(k_i)$ for $i = 1, \ldots, r$, and $g \in \Lambda(k)$, we have
\[
 \left(xh; y_{1}, \ldots, y_{r}; g\right) \sim \left(x; y_{h^{-1}(1)}, \ldots, y_{h^{-1}(r)}; \delta_{r; k_1, \ldots, k_r}(h)g\right).
\]
\item For $x \in X(r)$, $y_{i} \in Y(k_{i})$ for $i = 1, \ldots, r$, $g_{i} \in \Lambda(k_{i})$  for $i = 1, \ldots, r$, and $g \in \Lambda(k)$, we have
\[
 \left(x; y_{1}g_{1}, \ldots, y_{r}g_{r}; g\right) \sim \left(x; y_{1}, \ldots, y_{r}; \beta(g_{1}, \ldots, g_{r})g\right).
\]
\end{enumerate}
The group $\Lambda(k)$ acts on the right by multiplication,
\[
[x; y_1, \ldots, y_r; g] \cdot h = [x; y_1, \ldots, y_r; gh], 
\]
and this action is compatible with the equivalence relation above, so defines $X \circ Y$ as a presheaf on $B \Lambda$.
%  \begin{align*}
%   , \\
%   
%  \end{align*}
%For the first relation above, we must have that the lefthand side is an element of
%  \[
%    X(r) \times Y(k_1) \times \cdots \times Y(k_r) \times \Lambda(n)
%  \]
%while the righthand side is an element of
%  \[
%    X(r) \times Y\left(k_{h^{-1}(1)}\right) \times \cdots \times Y\left(k_{h^{-1}(r)}\right) \times \Lambda(n);
%  \]
%for the second relation, we must have . The right $\Lambda(n)$-action on $X \circ Y(n)$ is given by multiplication on the final coordinate.
\end{Defi}


We will now develop the tools to prove that the category $\Lambda\mb{\mbox{-}Coll}$ has a monoidal structure given by $\circ$, and that operads are the monoids with respect to this monoidal structure.
We provide the statement here.

\begin{thm}\label{thm:operad=monoid}
Let $\Lambda$ be an action operad.
  \begin{enumerate}
    \item The category $\Lambda\mb{\mbox{-}Coll}$ has a monoidal structure with tensor product given by $\circ$ and unit given by the collection $I$ with $I(n) = \emptyset$ when $n \neq 1$ and $I(1) = \Lambda(1)$.
    \item The category $\mb{Mon}(\Lambda\mb{\mbox{-}Coll})$ of monoids in $\Lambda\mb{\mbox{-}Coll}$ is equivalent to the category of $\Lambda$-operads.
  \end{enumerate}
\end{thm}

While this theorem can be proven by direct calculation using the equivalence relation given above, such a proof is unenlightening. 
Furthermore, we want to consider $\Lambda$-operads in categories other than sets, so an element-wise proof might not apply. 
Instead we will develop general machinery that will apply to $\Lambda$-operads in any cocomplete symmetric monoidal category, by which we mean a category that is cocomplete, equipped with a symmetric monoidal structure, and the functors $X \otimes -, - \otimes X$ preserve colimits for every object $X$ (as is the case if the monoidal structure is closed). 
Our construction of the monoidal structure on the category of $\Lambda$-collections will require the Day convolution product \cite{day-thesis}, and we begin by proving that $B\Lambda$ has a monoidal structure.

%. This is a general construction which produces a monoidal structure on the category of presheaves $[\mathcal{V}^{\textrm{op}}, \mb{Sets}]$ from a monoidal structure on the category $\mathcal{V}$. Since the category of $\Lambda$-collections is the presheaf category $[B\Lambda^{\textrm{op}}, \mb{Sets}]$, we need to show that 

\begin{prop}\label{prop:Gmonoidal}
The action operad structure of $\Lambda$ gives $B\Lambda$ a strict monoidal structure.
\end{prop}
\begin{proof}
The tensor product on $B\Lambda$ is given by addition on objects, with unit object 0; we denote tensor product by $+$. 
%The only thing to do is define the tensor product on morphisms and check naturality for the associativity and unit isomorphisms, which will both be identities. 
On morphisms, $+$ must be given by a group homomorphism
  \[
    + \colon \Lambda(n) \times \Lambda(m) \rightarrow \Lambda(n+m),
  \]
 and is defined by the formula
  \[
    +(g,h) = \beta(g,h).
  \]
By \cref{thm:charAOp}, $\beta$ is a homomorphism as desired, and we now write $+(g,h)$ as $g+h$.
%We need that $+$ is a group homomorphism, and the second part of \cref{calclem} shows that it preserves identity elements. The final action operad axiom shows that it also preserves group multiplication since $\pi_{2}(e_{2}) = e_{2}$ (each $\pi_{n}$ is a group homomorphism) and therefore
%  \begin{align*}
%    \left(+(g,h)\right) \cdot \left(+(g',h')\right) &= \mu\left(e_{2}; g,h\right) \cdot\mu\left(e_{2}; g',h'\right) \\
%    &= \mu\left(e_{2}e_{2}; gg', hh'\right) \\
%    &= +\left(gg',hh'\right).
%  \end{align*}

Addition of objects is strictly associative and unital.
Strict associativity at the level of morphisms follows from Axiom \eqref{eq3}, and strict unitality at the level of morphisms follows from Axiom \eqref{eq3} and \cref{lem:e0-unit}.
Thus $B\Lambda$ is a strict monoidal category as desired, completing the proof.

%For naturality of the associator, we must have $(f+g)+h = f+(g+h)$. By the operad axioms for both units and associativity, the lefthand side is given by
%  \begin{align*}
%    \mu(e_{2}; \mu(e_{2}; f,g), h) &= \mu(e_{2}; \mu(e_{2}; f,g), \mu(\id;h)) \\
%    &= \mu(\mu(e_{2}; e_{2}, \id); f,g,h),
%  \end{align*}
%while the righthand side is then
%  \[
%    \mu(e_{2}; f, \mu(e_{2}; g,h)) = \mu(\mu(e_{2}; \id, e_{2}); f,g,h).
%  \]
%By \cref{calclem}, both of these are equal to $\mu(e_{3}; f,g,h)$, proving associativity. Naturality of the unit isomorphisms follows similarly, using $e_{0}$.
\end{proof}

Now that $B\Lambda$ has a monoidal structure, there is also a monoidal structure on the category of $B\Lambda$-collections using Day convolution, denoted $\star$. 

\begin{Defi}[(Day convolution, \cite{day-thesis})]\label{Defi:day-conv}
Given collections $X, Y$, their \emph{convolution product} $X \star Y$ is given by the coend formula
  \[
    X \star Y (k) = \int^{m,n \in B\Lambda} X(m) \times Y(n) \times B\Lambda(k, m+n).
  \]
  \end{Defi}
  
\begin{rem}\label{rem:DC-simple}
Given that $  B\Lambda(k, m+n)$ is empty unless $k=m+n$, the coend in \cref{Defi:day-conv} can be rewritten as
  \[
    X \star Y (k) = \int^{m+n=k} X(m) \times Y(n) \times \Lambda(k).
  \]
In this formulation, $\Lambda(m) \times \Lambda(n)$ acts on $X(m) \times Y(n)$ by the product of their separate actions, and acts on $\Lambda(k)$ by $(g, h) \cdot t = \beta(g,h) t$.
\end{rem}
  
\begin{rem}[($n$-fold Day convolution)]\label{rem:nfold-DC}
The $n$-fold Day convolution product of a $\Lambda$-collection $Y$ with itself is given by the following coend formula.
  \[
    Y^{\star n}(k) = \int^{k_{1}+ \cdots + k_{n}=k } Y(k_{1}) \times \cdots \times Y(k_{n}) \times \Lambda(k)
  \]
  \end{rem}
  
Computations with Day convolution will necessarily involve heavy use of the calculus of coends, and we refer the unfamiliar reader to \cite{maclane-catwork} or \cite{loregian}. 
Our goal is to express the substitution tensor product as a coend just as in \cite{kelly-op}, and to do that we need one final result about the Day convolution product.

\begin{lem}\label{lem:calclem2}
Let $\Lambda$ be an action operad, $Y$ be a $\Lambda$-collection, and $k$ be a fixed natural number. Then the assignment
  \[
    n \mapsto Y^{\star n}(k)
  \]
can be given the structure of a functor $B\Lambda \rightarrow \mb{Sets}$.
\end{lem}
\begin{proof}
Since the convolution product is given by a coend, it is the universal object with maps
  \[
    \theta_{k_1, \ldots, k_n; k} \colon Y(k_{1}) \times \cdots \times Y(k_{n}) \times \Lambda(k) \rightarrow Y^{\star n}(k),
  \]
for $k= k_1 + \cdots + k_n$, such that the following diagram commutes for every $g_{1} \in \Lambda(k_{1}), \ldots, g_{n} \in \Lambda(k_{n})$.
  %%Expanded diagram
  % \[
  %   \xy
  %     {\ar   (0,0)*+{Y(k_{1}) \times \cdots \times Y(k_{n}) \times B\Lambda(k, k_{1} + \cdots + k_{n})}; (40,15)*+{Y(k_{1}) \times \cdots \times Y(k_{n}) \times B\Lambda(k, k_{1} + \cdots + k_{n})} };
  %     (9.5,10)*{\scriptstyle (-\cdot g_{1}, \ldots, -\cdot g_{n}) \times 1};
  %     {\ar (40,15)*+{Y(k_{1}) \times \cdots \times Y(k_{n}) \times B\Lambda(k, k_{1} + \cdots + k_{n})}; (80,0)*+{Y^{\star n}(k)} };
  %     {\ar (0,0)*+{Y(k_{1}) \times \cdots \times Y(k_{n}) \times B\Lambda(k, k_{1} + \cdots + k_{n})}; (40,-15)*+{Y(k_{1}) \times \cdots \times Y(k_{n}) \times B\Lambda(k, k_{1} + \cdots + k_{n})} };
  %     (9.5,-10)*+{\scriptstyle 1 \times \left( (g_{1} + \cdots + g_{n})\cdot - \right)};
  %     {\ar (40,-15)*+{Y(k_{1}) \times \cdots \times Y(k_{n}) \times B\Lambda(k, k_{1} + \cdots + k_{n})}; (80,0)*+{Y^{\star n}(k)} };
  %   \endxy
  % \]
  \[
    \xy
      (0,0)*+{Y(k_1) \times \cdots \times Y(k_n)  \times \Lambda(k)}="a";
      (70,0)*+{Y(k_1) \times \cdots \times Y(k_n) \times \Lambda(k)}="b";
      (70,-20)*+{Y^{\star n}(k)}="c";
      (0,-20)*+{Y(k_1) \times \cdots \times Y(k_n)  \times \Lambda(k)}="d";
      %
      {\ar^{(-\cdot g_1, \ldots, -\cdot g_n) \times 1} "a" ; "b"};
      {\ar_{1 \times \big( (g_1 + \cdots + g_n)\cdot -\big)} "a" ; "d"};
      {\ar^{\theta_{k_1, \ldots, k_n; k}} "b" ; "c"};
      {\ar_{\theta_{k_1, \ldots, k_n; k}} "d" ; "c"};
    \endxy
  \]
%
%The first map along the top acts using the $g_{i}$'s, while the first map along the bottom is given by
%  \[
%    h \mapsto \mu(e_{n}; g_{1}, \ldots, g_{n}) \cdot h
%  \]
%in the final coordinate.

Let $f \in \Lambda(n)$, considered as a morphism $n \rightarrow n$ in $B\Lambda$. We induce a map 
\[
f \bullet - \colon Y^{\star n}(k) \rightarrow Y^{\star n}(k)
\]
using the universal property of the coend. For each $k$ and $k_1, \ldots, k_n$ such that $k = k_1 + \cdots + k_n$, define
\[
f[k_1, \ldots, k_n] \colon Y(k_1) \times \cdots \times Y(k_n) \times \Lambda(k) \to  Y(k_{f^{-1}(1)}) \times \cdots \times Y(k_{f^{-1}(n)}) \times \Lambda(k)
\]
by
\[
f[k_1, \ldots, k_n](y_1, \ldots, y_n; g) = \big( y_{f^{-1}(1)}, \ldots, y_{f^{-1}(n)}; \delta_{n; k_1, \ldots, k_n}(f) g\big).
\]
% \ngmpar{the labels below need help, but I don't remember enough xypic to fix them}
We now check that the following diagram commutes, where underlined elements represent lists of the indicated elements indexed from $1$ to $n$, e.g.,
  \[
      \beta(\underline{g_i}) = \beta(g_1,\cdots,g_n) = g_1 + \cdots + g_n.
  \]
  \[
    \xy
      (0,0)*+{\prod_{i=1}^n Y(k_i)  \times \Lambda(k)}="a";
      (50,0)*+{\prod_{i=1}^n Y(k_i) \times \Lambda(k)}="b";
      (80,-20)*+{\prod_{i=1}^n Y(k_{f^{-1}(i)}) \times \Lambda(k)}="c";
      (80,-50)*+{Y^{\star n}(k)}="d";
      (0,-30)*+{\prod_{i=1}^n Y(k_i)  \times \Lambda(k)}="e";
      (30,-50)*+{\prod_{i=1}^n Y(k_{f^{-1}(i)}) \times \Lambda(k)}="f";
      (30,-20)*+{\prod_{i=1}^n Y(k_{f^{-1}(i)}) \times \Lambda(k)}="g";
      (40,-10)*+{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {1}}}}="1";
      (15,-25)*+{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {2}}}}="2";
      (60,-35)*+{\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {3}}}}="3";
      %
      % {\ar^{\left(-\cdot g_1, \ldots, -\cdot g_n\right) \times 1} "a" ; "b"};
      {\ar^{\left(\underline{-\cdot g_i}\right) \times 1} "a" ; "b"};
      {\ar^{f[k_1, \ldots, k_n]} "b" ; "c"};
      % {\ar_{\theta_{k_{f^{-1}(1)}, \ldots, k_{f^{-1}(n)}; k}} "c" ; "d"};
      {\ar^{\theta_{\underline{k_{f^{-1}(i)}}; k}} "c" ; "d"};
      % {\ar_{1 \times \left( (g_1 + \cdots + g_n)\cdot -\right)} "a" ; "e"};
      {\ar_{1 \times \left( \beta\left(\underline{g_i}\right)\cdot -\right)} "a" ; "e"};
      {\ar_{f[k_1, \ldots, k_n]} "e" ; "f"};
      % {\ar_{\theta_{k_{f^{-1}(1)}, \ldots, k_{f^{-1}(n)}; k}} "f" ; "d"};
      {\ar_{\theta_{\underline{k_{f^{-1}(i)}}; k}} "f" ; "d"};
      {\ar^{f[k_1, \ldots, k_n]} "a" ; "g"};
      % {\ar_{1 \times \left( \left(g_{f^{-1}(1)} + \cdots + g_{f^{-1}(n)}\right)\cdot -\right)} "g" ; "f"};
      {\ar^{1 \times \left(\beta\left(\underline{g_{f^{-1}(i)}}\right) \cdot - \right)} "g" ; "f"};
      % {\ar_{\left(-\cdot g_{f^{-1}(1)}, \ldots, -\cdot g_{f^{-1}(n)}\right) \times 1} "g" ; "c"};
      {\ar_{\left(\underline{- \cdot g_{f^{-1}(i)}} \right) \times 1} "g" ; "c"};
    \endxy
  \]
Square $\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {1}}}$ commutes by naturality of symmetries, square $\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {2}}}$ commutes by Axiom \eqref{eq8} from \cref{thm:charAOp}, and square $\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {3}}}$ commutes by the definition of the coend. 
Therefore by the universality property, there is a unique map $f \bullet - \colon Y^{\star n}(k) \rightarrow Y^{\star n}(k)$ such that
\begin{equation}\label{eq:fbullet}
\theta_{k_{f^{-1}(1)}, \ldots, k_{f^{-1}(n)}; k} \circ f[k_1, \ldots, k_n] = (f \bullet -) \circ \theta_{k_1, \ldots, k_n; k}
\end{equation}
for all $k$ and $k_1, \ldots, k_n$ such that $k = k_1 + \cdots + k_n$.
Given $f_1, f_2 \in \Lambda(n)$, we have
%\begin{align*}
%(f_2 \bullet -) \circ (f_1 \bullet -) \circ \theta_{k_1, \ldots, k_n; k} & = (f_2 \bullet -) \circ \theta_{k_{f_1^{-1}(1)}, \ldots, k_{f_1^{-1}(n)}; k} \circ f_1[k_1, \ldots, k_n] \\
%& = \theta_{k_{f_1^{-1}(f_2^{-1}(1))}, \ldots, k_{f_1^{-1}(f_2^{-1}(n))}; k} \circ f_2[k_{f_1^{-1}(1)}, \ldots, k_{f_2^{-1}(n)}] \circ f_1[k_1, \ldots, k_n] \\
%& = \theta_{k_{(f_2f_1)^{-1}(1)}, \ldots, k_{(f_2f_1)^{-1}(n)};k} \circ (f_2f_1)[k_1, \ldots, k_n] \\
%& = \big( (f_2f_1) \bullet -\big) \circ \theta_{k_1, \ldots, k_n; k}
%\end{align*}
%\acnote{this spacing any better? similar lists to the diagram above - also is there a typo in the second line above? $f_2$ at end of the middle list should be $f_1$?}
\begin{align*}
(f_2 \bullet -) \circ (f_1 \bullet -) \circ \theta_{\underline{k_i};k} &= (f_2 \bullet -) \circ \theta_{\underline{k_{f_1^{-1}(i)}};k} \circ f_1\left[\underline{k_i}\right] \\
&= \theta_{\underline{k_{f_1^{-1}(f_2^{-1}(i))}};k} \circ f_2\left[k_{f_1^{-1}(1)}, \ldots, k_{f_1^{-1}(n)}\right] \circ f_1\left[\underline{k_i}\right] \\
&= \theta_{\underline{k_{(f_2f_1)^{-1}(i)}};k} \circ (f_2f_1)\left[\underline{k_i}\right] \\
&= ((f_2f_1) \bullet -) \circ \theta_{\underline{k_i};k}
\end{align*}
by \cref{eq:fbullet} twice, the left action of $\Sigma_n$ on $n$-tuples as in \cref{rem:Sn-tuples}, and Axiom \eqref{eq6} from \cref{thm:charAOp}. By the universal property of the coend, we conclude that $(f_2 \bullet -) \circ (f_1 \bullet -) = \big( (f_2f_1) \bullet -\big)$, verifying functoriality and completing the proof.
% using the collection of maps
%  \[
%    \prod_{i=1}^{n} Y(k_{i}) \times B\Lambda(k, k_{1} + \cdots + k_{n}) \rightarrow \prod_{i=1}^{n} Y(k_{\pi (f)^{-1}(i)}) \times B\Lambda(k, k_{1} + \cdots + k_{n})
%  \]
%by using the symmetry $\pi(f)$ on the first $n$ factors and left multiplication by the element $\mu(f; e_{k_{1}}, \ldots, e_{k_{n}})$ on $B\Lambda(k, k_{1} + \cdots + k_{n})$. To induce a map between the coends, we must show that these maps commute with the two lefthand maps in the diagram above. For the top map, this is merely functoriality of the product together with naturality of the symmetry. For the bottom map, this is the equation
%  \[
%    \mu(f; \overline{e}) \cdot \mu(e; g_{1}, \ldots, g_{n}) = \mu(e; g_{\pi (f)^{-1} 1}, \ldots, g_{\pi (f)^{-1} n}) \cdot \mu(f; \overline{e}).
%  \]
%Both of these are equal to $\mu(f; g_{1}, \ldots, g_{n})$ by the action operad axiom. Functoriality is then easy to check using that the maps inducing $(f_{1}f_{2}) \bullet -$ are given by the composite of the maps inducing $f_{1} \bullet (f_{2} \bullet -)$.
\end{proof}

\begin{rem}[(Yoneda via coends)]\label{rem:yoneda-coend}
We make heavy use of the following consequence of the Yoneda lemma: given any functor $F \colon B\Lambda \rightarrow \mb{Sets}$ and a fixed object $a \in B\Lambda$, there is a natural isomorphism
  \[
    \int^{n \in B\Lambda} B\Lambda(n,a) \times F(n) \cong F(a)
  \]
given by sending the pair $(g, x)$, for $g \in B\Lambda(n,a)$ and $x \in F(n)$, to $F(g)(x)$.
There is a corresponding result for $F \colon B\Lambda^{\textrm{op}} \rightarrow \mb{Sets}$, using representables of the form $B\Lambda(a,n)$ instead.
\end{rem}


We are now ready for the abstract description of the substitution tensor product.

\begin{lem}\label{lem:star-of-circle}
  Let $X, Y$ be $\Lambda$-collections. Then there is a natural isomorphism
  \[
  X \circ Y \cong  \int^{n} X(n) \times Y^{\star n},
  \]
  induced by the colimit structures.
\end{lem}
\begin{proof}
The coend $\int^{n} X(n) \times Y^{\star n}(k)$ can be expanded as follows, using \cref{rem:nfold-DC}, the fact that $A \times -$ preserves colimits for any $A$, and the Fubini theorem for coends \cite[Theorem 1.3.1]{loregian}.
\begin{align*}
\int^{n} X(n) \times Y^{\star n}(k) & \cong \int^{n} X(n) \times \left( \int^{k_{1}+ \cdots + k_{n}=k } Y(k_{1}) \times \cdots \times Y(k_{n}) \times \Lambda(k) \right) \\
& \cong \int^{n, k_{1}+ \cdots + k_{n}=k} X(n) \times Y(k_{1}) \times \cdots \times Y(k_{n}) \times \Lambda(k).
\end{align*}
This final coend, when written out as a coequalizer, gives the formula in \cref{Defi:sub-prod}.
The two isomorphisms above are natural in both variables by the universal property of the colimits involved.
\end{proof}

\begin{cor}\label{cor:circ-adj}
Let $Y$ be a $\Lambda$-collection.
\begin{enumerate}
\item The functor $- \circ Y \colon \Lambda\mb{\mbox{-}Coll} \to \Lambda\mb{\mbox{-}Coll}$ has a right adjoint $[Y, -]$.
\item For any other $\Lambda$-collection $X$, there is a natural isomorphism
\[
X^{\star n} \circ Y \cong (X \circ Y)^{\star n},
\]
induced by the colimit structures.
\end{enumerate}
\end{cor}
\begin{proof}
We define the $\Lambda$-collection $[Y, Z]$ by
\[
[Y,Z](k) = \Lambda\mb{\mbox{-}Coll}(Y^{\star k}, Z)
\]
on objects and \cref{lem:calclem2} on morphisms via precomposition. 
Then
\begin{align*}
\Lambda\mb{\mbox{-}Coll}\left( X \circ Y, Z \right) & \cong \Lambda\mb{\mbox{-}Coll}\left( \int^{n} X(n) \times Y^{\star n}, Z \right) \\
& \cong \int_{n} \Lambda\mb{\mbox{-}Coll}\big(  X(n) \times Y^{\star n}, Z \big) \\
& \cong \int_{n} \mb{Sets}\big(  X(n), \Lambda\mb{\mbox{-}Coll}(Y^{\star n}, Z) \big) \\
& \cong \Lambda\mb{\mbox{-}Coll}\big( X, [Y,Z] \big)
\end{align*}
by \cref{lem:star-of-circle}, the representable functor $\Lambda\mb{\mbox{-}Coll}\left( -, Z \right)$ mapping coends to ends, the copowering of collections over sets, and the identification of the set of natural transformations as an end. 
Each of these isomorphisms is visibly natural in all three variables, so  $[Y, -]$ is right adjoint to $- \circ Y$, completing the proof of the first claim.

The second claim follows immediately from the first, as $X \mapsto X^{\star n}$ is a colimit, hence preserved by $- \circ Y$. 
\end{proof}

\begin{lem}\label{lem:Istarn(k)}
Let $I$ be the $\Lambda$-collection defined by
\[
I(k) = \left\{ \begin{array}{lr}
\emptyset & k \neq 1, \\
\Lambda(1) & k=1.
\end{array} \right.
\]
Then $I^{\star n} (k)$ is empty unless $k=n$, and then is isomorphic to $\Lambda(n)$.
\end{lem}
\begin{proof}
By definition, we have
 \[
    I^{\star n}(k) = \int^{k_{1}+ \cdots + k_{n}=k } I(k_{1}) \times \cdots \times I(k_{n}) \times \Lambda(k).
  \]
The only non-empty terms appear when $k_1 = k_2 = \cdots = k_n = 1$, from which we derive $k=n$. The coend is therefore the coequalizer $\coeqb{\Lambda(1)^n}{\Lambda(n)}{\Lambda(1)^n}$, where $\Lambda(1)^n$ acts on itself by right multiplication and on $\Lambda(n)$ by
\[
(g_1, \ldots, g_n) \cdot h = \beta(g_1, \ldots, g_n)h.
\]
This coequalizer is again $\Lambda(n)$, via the map above, completing the proof.
\end{proof}

Finally we are in a position to prove \cref{thm:operad=monoid}. 

\begin{proof}[Proof of \cref{thm:operad=monoid}]
First we must show that $\Lambda\mbox{-}\mb{Coll}$ has a monoidal structure using $\circ$. To prove this, we must give the unit and associativity isomorphisms and then check the monoidal category axioms. Define the unit object to be $I = B\Lambda(-,1)$. Then for the left unit isomorphism, we find that
  \begin{align*}
    I \circ Y (k) &= \int^{n} B\Lambda(n,1) \times Y^{\star n}(k) \\
    &\cong Y^{\star 1}(k) \\
    &\cong Y(k),
  \end{align*}
where both isomorphisms are induced by the universal property of the coend. For the right unit isomorphism, we have that
  \begin{align*}
    X \circ I (k) &= \int^{n} X(n) \times I^{\star n}(k) \\
    &\cong X(k)
  \end{align*}
by \cref{lem:Istarn(k)}.

Next we turn to constructing the associativity isomorphisms.
We first compute that
\begin{align*}
\big[ Y, [Z,W] \big](k) & = \lcoll \big( Y^{\star k}, [Z, W] \big) \\
& \cong \lcoll ( Y^{\star k} \circ Z, W) \\
& \cong \lcoll \big( (Y \circ Z)^{\star k}, W \big) \\
& = \lcoll \big[ Y \circ Z, W \big] (k)
\end{align*}
by the definition of the internal hom from the first part of \cref{cor:circ-adj} and the preservation of colimits from the second part of \cref{cor:circ-adj}.
These isomorphisms are compatible with the right $\Lambda(k)$-actions, so constitute an isomorphism that we denote
\[
\overline{a} \colon \big[ Y, [Z,W] \big] \cong \big[ Y \circ Z, W \big].
\]
The associativity isomorphism is defined to be the one induced, by Yoneda, from the composite below, in which each unmarked isomorphism is obtained from an adjunction of the form $- \circ A \dashv [A, -]$.
\begin{align*}
\lcoll \big( (X \circ Y) \circ Z, W \big) & \cong \lcoll \big( X \circ Y, [Z, W] \big) \\
& \cong \lcoll \big( X, \big[ Y, [Z,W] \big] \big) \\
& \stackrel{\overline{a}}{\cong} \lcoll \big( X, \big[ Y \circ Z, W \big] \big) \\
& \cong \lcoll \big(X \circ (Y \circ Z), W \big)
\end{align*}

In order to finish the proof that $(\lcoll, \circ, I)$, with the unit and associativity isomorphisms above, is a monoidal category, we must check two axioms.
These axioms follow immediately from the fact that the unit and associativity isomorphisms were all induced by the universal property of the colimit constructing their domains.

%For associativity, we compute $(X \circ Y) \circ Z$ and $X \circ (Y \circ Z)$.
%  \begin{align*}
%    ((X \circ Y) \circ Z) (k) &= \int^{m} X \circ Y (m) \times Z^{\star m}(k) \\
%    &= \int^{m} \left( \int^{l} X(l) \times Y^{\star l}(m) \right) \times Z^{\star m}(k) \\
%    &\cong \int^{m,l} X(l) \times Y^{\star l}(m) \times Z^{\star m}(k) \\
%    &\cong \int^{l} X(l) \times \int^{m} Y^{\star l}(m) \times Z^{\star m}(k)
%  \end{align*}
%The first isomorphism is from products distributing over colimits and hence coends, and the second is that fact plus the Fubini Theorem for coends \cite{maclane-catwork}. A similar calculation shows
%  \[
%    (X \circ (Y \circ Z))(k) \cong \int^{l} X(l) \times (Y \circ Z)^{\star l}(k).
%  \]
%Thus the associativity isomorphism will be induced once we construct an isomorphism $\int^{m} Y^{\star l}(m) \times Z^{\star m} \cong (Y \circ Z)^{\star l}$. We do this by induction, with the $l=1$ case being the isomorphism $Y^{\star 1} \cong Y$ together with the definition of $\circ.$  Assuming true for $l$, we prove the case for $l+1$ by the calculations below.
%  \begin{align*}
%    (Y \circ Z)^{\star (l+1)} &\cong (Y \circ Z) \star (Y \circ Z)^{\star l} \\
%    &\cong (Y \circ Z) \star \left( \int^{m} Y^{\star l}(m) \times Z^{\star m} \right) \\
%    &= \left( \int^{n} Y(n) \times Z^{\star n} \right) \star \left( \int^{m} Y^{\star l}(m) \times Z^{\star m} \right) \\
%    &= \int^{a,b} \left( \int^{n} Y(n) \times Z^{\star n}(a) \right)  \times \left( \int^{m} Y^{\star l}(m) \times Z^{\star m}(b) \right) \times B\Lambda(-, a+b) \\
%    &\cong \int^{a,b,n,m} Y(n) \times Y^{\star l}(m) \times Z^{\star n}(a) \times Z^{\star m}(b) \times  B\Lambda(-, a+b) \\
%    &\cong \int^{n,m} Y(n) \times Y^{\star l}(m) \times Z^{\star (n+m)} \\
%    &\cong \int^{j} \int^{n,m} Y(n) \times Y^{\star l}(m) \times B\Lambda(j, n+m) \times Z^{\star j} \\
%    &\cong \int^{j} Y^{\star (l+1)}(j) \times Z^{\star j}
%  \end{align*}
%Each isomorphism above arises from the symmetric monoidal structure on $\mb{Sets}$ using products, the monoidal structure on presheaves using $\star$, the properties of the coend, or the fact that products distribute over colimits.

%For the monoidal category axioms on $\widehat{B\Lambda}$, we only need to note that the unit and associativity isomorphisms arise, using the universal properties of the coend, from the unit and associativity isomorphisms on the category of sets together with the interaction between products and colimits. Hence the monoidal category axioms follow by those same axioms in $\mb{Sets}$ together with the universal property of the coend.

Now we must show that monoids in $(\lcoll, \circ, I)$ are operads. By the Yoneda lemma, a map of $\Lambda$-collections $\eta \colon I \rightarrow X$ corresponds to an element $\id \in X(1)$ since $I = B\Lambda(-,1)$. A map $\mu \colon X \circ X \rightarrow X$ is given by, for each $k$, a $\Lambda(k)$-equivariant map $(X \circ X) (k) \rightarrow X(k)$. By the universal property of the coend, this is equivalent to giving maps
  \[
  \mu_{n; k_1, \ldots, k_n;k} \colon X(n) \times X(k_{1}) \times \cdots \times X(k_{n}) \times \Lambda(k) \to X(k)
%    \mu_{n, K} \colon X(n) \times X(k_{1}) \times \cdots \times X(k_{n}) \times B\Lambda(k, k_{1}+\cdots +k_{n}) \rightarrow X(k)
  \]
that are compatible with the following group actions as specified.
\begin{itemize}
\item $\Lambda(n)$ acts on $X(n)$ on the right by the given action, and on $X(k_1) \times \cdots \times X(k_n) \times \Lambda(k)$ on the left by permutations and $\delta$. The map $\mu$ must coequalize these.
\item The group $\Lambda(k_i)$ acts on the factor $X(k_i)$ on the right by the given action, and on the left of $\Lambda(k)$ by group multiplication and $\beta$. The map $\mu$ must coequalize these.
\item $\Lambda(k)$ acts on the right of $\Lambda(k)$ by group multiplication, and on $X(k)$ on the right by the given action. The map $\mu$ must preserve this action.
\end{itemize}
Given such a monoid structure, we define the operadic multiplication on the $\Lambda$-collection $X$ by
\[
    \mu (x; y_{1}, \ldots, y_{n}) = \mu_{n; k_1, \ldots, k_n; k}(x; y_{1}, \ldots, y_{n}; e_{k}).
  \]
Conversely, given an operad $P$, we make the underlying $\Lambda$-collection into a monoid under $\circ$ by defining
\[
 \mu_{n; k_1, \ldots, k_n; k}(x; y_{1}, \ldots, y_{n}; g) =  \mu (x; y_{1}, \ldots, y_{n}) \cdot g.
\]
We leave checking the remaining details to the reader.
\end{proof}




